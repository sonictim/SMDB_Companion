import{c as he,a as $,t as F,d as Ye}from"../chunks/mBltkime.js";import{i as Ee}from"../chunks/D5lfpR5M.js";import{o as pe,p as De,av as ye,L as u,aw as q,ax as Me,s as a,w as o,ay as ve,v as t,t as j,a4 as se,g as e,q as Ie,az as Ue,aA as je,e as st}from"../chunks/4B8pOMzx.js";import{s as ie,e as h}from"../chunks/saORRO85.js";import{l as Oe,s as Le,c as Te,d as qe,i as _e,p as ot}from"../chunks/DGF-fiXx.js";import{I as Fe,s as He,O as Pe,r as Ne,V as Ze,a as be,b as Re,p as A,e as ke,i as ze,c as lt,S as Ke,d as et,f as Ge,g as nt,h as it,j as ct,P as Je,k as vt}from"../chunks/CAW8Yf8D.js";import{i as We,o as tt,g as Xe}from"../chunks/DuSSP3kn.js";function at(O,z){const D=Oe(z,["children","$$slots","$$events","$$legacy"]);Fe(O,Le({name:"arrow-big-left"},()=>D,{iconNode:[["path",{d:"M18 15h-6v4l-7-7 7-7v4h6v6z"}]],children:(b,l)=>{var f=he(),v=pe(f);He(v,z,"default",{},null),$(b,f)},$$slots:{default:!0}}))}function rt(O,z){const D=Oe(z,["children","$$slots","$$events","$$legacy"]);Fe(O,Le({name:"arrow-big-right"},()=>D,{iconNode:[["path",{d:"M6 9h6V5l7 7-7 7v-4H6V9z"}]],children:(b,l)=>{var f=he(),v=pe(f);He(v,z,"default",{},null),$(b,f)},$$slots:{default:!0}}))}function dt(O,z){const D=Oe(z,["children","$$slots","$$events","$$legacy"]);Fe(O,Le({name:"grip-vertical"},()=>D,{iconNode:[["circle",{cx:"9",cy:"12",r:"1"}],["circle",{cx:"9",cy:"5",r:"1"}],["circle",{cx:"9",cy:"19",r:"1"}],["circle",{cx:"15",cy:"12",r:"1"}],["circle",{cx:"15",cy:"5",r:"1"}],["circle",{cx:"15",cy:"19",r:"1"}]],children:(b,l)=>{var f=he(),v=pe(f);He(v,z,"default",{},null),$(b,f)},$$slots:{default:!0}}))}function ut(O,z){const D=Oe(z,["children","$$slots","$$events","$$legacy"]);Fe(O,Le({name:"list-check"},()=>D,{iconNode:[["path",{d:"M11 18H3"}],["path",{d:"m15 18 2 2 4-4"}],["path",{d:"M16 12H3"}],["path",{d:"M16 6H3"}]],children:(b,l)=>{var f=he(),v=pe(f);He(v,z,"default",{},null),$(b,f)},$$slots:{default:!0}}))}function ft(O,z){const D=Oe(z,["children","$$slots","$$events","$$legacy"]);Fe(O,Le({name:"list-ordered"},()=>D,{iconNode:[["path",{d:"M10 12h11"}],["path",{d:"M10 18h11"}],["path",{d:"M10 6h11"}],["path",{d:"M4 10h2"}],["path",{d:"M4 6h1v4"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1"}]],children:(b,l)=>{var f=he(),v=pe(f);He(v,z,"default",{},null),$(b,f)},$$slots:{default:!0}}))}function pt(O,z){const D=Oe(z,["children","$$slots","$$events","$$legacy"]);Fe(O,Le({name:"palette"},()=>D,{iconNode:[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z"}]],children:(b,l)=>{var f=he(),v=pe(f);He(v,z,"default",{},null),$(b,f)},$$slots:{default:!0}}))}function _t(O,z){const D=Oe(z,["children","$$slots","$$events","$$legacy"]);Fe(O,Le({name:"tags"},()=>D,{iconNode:[["path",{d:"m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19"}],["path",{d:"M9.586 5.586A2 2 0 0 0 8.172 5H3a1 1 0 0 0-1 1v5.172a2 2 0 0 0 .586 1.414L8.29 18.29a2.426 2.426 0 0 0 3.42 0l3.58-3.58a2.426 2.426 0 0 0 0-3.42z"}],["circle",{cx:"6.5",cy:"9.5",r:".5",fill:"currentColor"}]],children:(b,l)=>{var f=he(),v=pe(f);He(v,z,"default",{},null),$(b,f)},$$slots:{default:!0}}))}var gt=F("<div> </div>"),mt=F("<div> </div>"),ht=F('<div class="page-columns svelte-l0wmiu"><div><div class="block"><div class="header"><h2>Audiosuite Tags</h2> <button class="cta-button cancel"><!> Remove</button></div> <div class="bar"><button class="cta-button small">Add</button> <input type="text" id="find-text" placeholder="New Tag" class="input-field"></div> <div class="block inner"><!></div></div></div> <div class="arrow-column svelte-l0wmiu"><div class="move-button-container svelte-l0wmiu"><button class="arrow-button svelte-l0wmiu"><!></button> <button class="arrow-button svelte-l0wmiu"><!></button></div></div> <div><div class="block"><div class="header"><h2>Filename Tags</h2> <button class="cta-button cancel"><!> Remove</button></div> <div class="bar"><button class="cta-button small">Add</button> <input type="text" id="find-text" placeholder="Add New String" class="input-field"></div> <div class="block inner"><!></div></div></div></div>');function bt(O,z){De(z,!1);const[D,Q]=qe(),b=()=>Te(A,"$preferencesStore",D),l=q();let f=q(),v=q(),p=q(new Set),c=q(new Set);function _(g){e(p).has(g)?e(p).delete(g):e(p).add(g),u(p,new Set(e(p)))}function P(g){e(c).has(g)?e(c).delete(g):e(c).add(g),u(c,new Set(e(c)))}function X(g){g.forEach(W=>ae(W)),te()}function ae(g){A.update(W=>{const ee=W.autoselects.filter(J=>J!==g);return{...W,autoselects:ee}})}function te(){e(p).clear(),u(p,new Set)}function Z(g){e(l).autoselects.includes(g)||(Ue(l,e(l).autoselects=[...e(l).autoselects,g]),e(l).autoselects.sort(),A.set(e(l)),u(f,""))}function M(){e(p).forEach(g=>L(g)),e(p).forEach(g=>ae(g)),te()}function N(){e(c).forEach(g=>Z(g)),e(c).forEach(g=>R(g)),Y()}function L(g){e(l).tags.includes(g)||(Ue(l,e(l).tags=[...e(l).tags,g]),e(l).tags.sort(),A.set(e(l)),u(v,""))}function G(g){g.forEach(W=>R(W)),Y()}function Y(){e(c).clear(),u(c,new Set)}function R(g){A.update(W=>{const ee=W.tags.filter(J=>J!==g);return{...W,tags:ee}})}ye(()=>b(),()=>{u(l,b())}),Me(),Ee();var re=ht(),T=a(re),k=a(T),x=a(k),I=o(a(x),2),H=a(I);Pe(H,{size:"18"}),ve(),t(I),t(x);var w=o(x,2),C=a(w),E=o(C,2);Ne(E),t(w);var V=o(w,2),oe=a(V);const Se=se(()=>Array.from(e(l).tags));Ze(oe,{get items(){return e(Se)},children:We,$$slots:{default:(g,W)=>{const ee=se(()=>W.item);var J=gt();let ce;var n=a(J,!0);t(J),j((S,i)=>{ce=be(J,1,"list-item",null,ce,{"selected-item":S,"unselected-item":i}),ie(n,e(ee))},[()=>e(c).has(e(ee)),()=>!e(c).has(e(ee))],se),h("click",J,()=>P(e(ee))),$(g,J)}}}),t(V),t(k),t(T);var $e=o(T,2),ue=a($e),ge=a(ue),le=a(ge);rt(le,{size:"100"}),t(ge);var fe=o(ge,2),we=a(fe);at(we,{size:"100"}),t(fe),t(ue),t($e);var y=o($e,2),r=a(y),s=a(r),d=o(a(s),2),B=a(d);Pe(B,{size:"18"}),ve(),t(d),t(s);var K=o(s,2),ne=a(K),xe=o(ne,2);Ne(xe),t(K);var me=o(K,2),Ae=a(me);const de=se(()=>Array.from(e(l).autoselects));Ze(Ae,{get items(){return e(de)},children:We,$$slots:{default:(g,W)=>{const ee=se(()=>W.item);var J=mt();let ce;var n=a(J,!0);t(J),j((S,i)=>{ce=be(J,1,"list-item",null,ce,{"selected-item":S,"unselected-item":i}),ie(n,e(ee))},[()=>e(p).has(e(ee)),()=>!e(p).has(e(ee))],se),h("click",J,()=>_(e(ee))),$(g,J)}}}),t(me),t(r),t(y),t(re),h("click",I,()=>G([...e(c)])),h("click",C,()=>L(e(v))),Re(E,()=>e(v),g=>u(v,g)),h("click",ge,()=>N()),h("click",fe,()=>M()),h("click",d,()=>X([...e(p)])),h("click",ne,()=>Z(e(f))),Re(xe,()=>e(f),g=>u(f,g)),$(O,re),Ie(),Q()}var $t=F("<option> </option>"),xt=F("<option> </option>"),yt=F("<option> </option>"),St=F('<div class="block"><div class="header"><h2>Configuration Options</h2> <button class="cta-button cancel"><!> Reset Preferences</button></div> <div class="block inner"><div class="grid"><span>Remove Records From: <select class="select-field"></select></span> <span>Duplicate Files On Disk: <select class="select-field"></select></span> <span>New Database Tag: <input class="input-field" placeholder="-thinned"></span> <button type="button" class="grid item"><!> <span>Ignore Filetypes (extensions)</span></button></div></div> <div class="bar" style="margin-top: 20px;"><button class="cta-button small">Save:</button> <input type="text" class="input-field" placeholder="Enter New Configuraion Preset Name" style=" margin-right: 20px;"> <button class="cta-button small">Load:</button> <select class="select-field" style=" margin-right: 10px;"></select> <button class="cta-button small cancel">Delete</button></div></div>');function wt(O,z){De(z,!1);const[D,Q]=qe(),b=()=>Te(A,"$preferencesStore",D),l=q();let f=["default","TJF"];ye(()=>b(),()=>{u(l,b())}),Me(),Ee();var v=St(),p=a(v),c=o(a(p),2),_=a(c);Pe(_,{size:18}),ve(),t(c),t(p);var P=o(p,2),X=a(P),ae=a(X),te=o(a(ae));ke(te,4,()=>["New Database","Current Database"],ze,(T,k)=>{var x=$t(),I={},H=a(x,!0);t(x),j(()=>{I!==(I=k)&&(x.value=(x.__value=k)==null?"":k),ie(H,k)}),$(T,x)}),t(te),t(ae);var Z=o(ae,2),M=o(a(Z));ke(M,4,()=>["Keep","Move To Trash","Permanently Delete"],ze,(T,k)=>{var x=xt(),I={},H=a(x,!0);t(x),j(()=>{I!==(I=k)&&(x.value=(x.__value=k)==null?"":k),ie(H,k)}),$(T,x)}),t(M),t(Z);var N=o(Z,4),L=a(N);{var G=T=>{Ke(T,{size:20,class:"checkbox checked"})},Y=T=>{et(T,{size:20,class:"checkbox"})};_e(L,T=>{b().ignore_filetype?T(G):T(Y,!1)})}ve(2),t(N),t(X),t(P);var R=o(P,2),re=o(a(R),6);ke(re,5,()=>f,ze,(T,k)=>{var x=yt(),I={},H=a(x,!0);t(x),j(()=>{I!==(I=e(k))&&(x.value=(x.__value=e(k))==null?"":e(k)),ie(H,e(k))}),$(T,x)}),t(re),ve(2),t(R),t(v),h("click",c,function(...T){var k;(k=lt)==null||k.apply(this,T)}),$(O,v),Ie(),Q()}var kt=F("<option> </option>"),zt=F("<div> </div>"),Ct=F('<div class="block svelte-wm3ozt"><div class="header"><h2>Duplicate Match Criteria</h2> <button class="cta-button cancel"><!> Remove Selected</button></div> <div class="bar"><div class="button-group"><span>Add:</span> <select class="select-field"></select></div> <button type="button" class="grid item" style="margin-left: 120px"><!> <span>Ignore Filetypes (extensions)</span></button></div> <div class="block inner svelte-wm3ozt"><!></div></div>');function Tt(O,z){De(z,!1);const[D,Q]=qe(),b=()=>Te(A,"$preferencesStore",D),l=q(),f=q();let v=q(new Set);function p(){A.update(w=>({...w,ignore_filetype:!w.ignore_filetype}))}function c(w){e(v).has(w)?e(v).delete(w):e(v).add(w),u(v,new Set(e(v)))}function _(w){w.forEach(C=>P(C)),X()}function P(w){A.update(C=>({...C,match_criteria:C.match_criteria.filter(E=>E!==w)}))}function X(){e(v).clear(),u(v,new Set)}function ae(w){const C=w.target;A.update(E=>E.match_criteria.includes(C.value)?E:{...E,match_criteria:[...E.match_criteria,C.value]})}ye(()=>b(),()=>{u(l,b())}),ye(()=>b(),()=>{u(f,b().columns.filter(w=>!b().match_criteria.includes(w)))}),Me(),Ee();var te=Ct(),Z=a(te),M=o(a(Z),2),N=a(M);Pe(N,{size:"18"}),ve(),t(M),t(Z);var L=o(Z,2),G=a(L),Y=o(a(G),2);ke(Y,5,()=>e(f),ze,(w,C)=>{var E=kt(),V={},oe=a(E,!0);t(E),j(()=>{V!==(V=e(C))&&(E.value=(E.__value=e(C))==null?"":e(C)),ie(oe,e(C))}),$(w,E)}),t(Y),t(G);var R=o(G,2),re=a(R);{var T=w=>{Ke(w,{size:20,class:"checkbox checked"})},k=w=>{et(w,{size:20,class:"checkbox"})};_e(re,w=>{b().ignore_filetype?w(T):w(k,!1)})}ve(2),t(R),t(L);var x=o(L,2),I=a(x);const H=se(()=>Array.from(b().match_criteria));Ze(I,{get items(){return e(H)},children:We,$$slots:{default:(w,C)=>{const E=se(()=>C.item);var V=zt();let oe;var Se=a(V,!0);t(V),j(($e,ue)=>{oe=be(V,1,"list-item",null,oe,{"selected-item":$e,"unselected-item":ue}),ie(Se,e(E))},[()=>e(v).has(e(E)),()=>!e(v).has(e(E))],se),h("click",V,()=>c(e(E))),$(w,V)}}}),t(x),t(te),h("click",M,()=>_([...e(v)])),h("change",Y,ae),h("click",R,p),$(O,te),Ie(),Q()}var At=F("<option> </option>"),Pt=F("<option> </option>"),Nt=F('<input type="text" placeholder="Enter New Option" class="input-field">'),Et=F('<div class="drop-indicator svelte-s9hvzz"></div>'),Dt=F('<div><div draggable="true" role="listitem"><div class="drag-handle svelte-s9hvzz"><!></div> <div class="item-content svelte-s9hvzz"> <!> <!></div></div> <!></div>'),Mt=F('<div class="drop-indicator svelte-s9hvzz"></div>'),It=F('<div class="block svelte-s9hvzz"><div class="header"><h2>Duplicate Selection Logic</h2> <button class="cta-button cancel"><!> Remove Selected</button></div> <div class="bar"><button class="cta-button small">Add</button> <select class="select-field" style="flex-grow: 0"></select> <select class="select-field" style="flex-grow: 0"></select> <!></div> <div class="block inner svelte-s9hvzz"><!>  <div><!></div></div></div>');function Ot(O,z){De(z,!1);const[D,Q]=qe(),b=()=>Te(A,"$preferencesStore",D),l=q();tt(()=>{console.log("Drag component mounted")});let f=q(new Set),v=q(""),p=q("Contains"),c=q("FilePath"),_=q(null),P=q(null),X=null,ae=[{id:"Is",name:"is"},{id:"IsNot",name:"is NOT"},{id:"Largest",name:"is largest"},{id:"Smallest",name:"is smallest"},{id:"IsEmpty",name:"is empty"},{id:"IsNotEmpty",name:"is NOT empty"},{id:"Contains",name:"contains"},{id:"DoesNotContain",name:"does NOT contain"}];function te(r){e(f).has(r)?e(f).delete(r):e(f).add(r),u(f,new Set(e(f)))}function Z(r){A.update(s=>({...s,preservation_order:s.preservation_order.filter(d=>!r.includes(d))})),M()}function M(){e(f).clear(),u(f,new Set)}function N(r){u(p,r.target.value)}function L(r){u(c,r.target.value)}function G(){e(l).preservation_order.some(r=>r.column===e(c)&&r.operator===e(p)&&r.variable===e(v))||(A.update(r=>({...r,preservation_order:[{column:e(c),operator:e(p),variable:e(v)},...r.preservation_order]})),u(v,""))}function Y(r,s){r.dataTransfer&&(X=e(l).preservation_order[s],u(_,s),r.dataTransfer.setData("text/plain",s.toString()),r.dataTransfer.effectAllowed="move",r.currentTarget instanceof HTMLElement&&r.currentTarget.classList.add("dragging"))}function R(r,s){r.preventDefault(),r.dataTransfer&&(r.dataTransfer.dropEffect="move"),e(_)!==null&&e(_)!==s&&u(P,s)}function re(r,s){r.preventDefault(),e(_)!==null&&e(_)!==s&&u(P,s)}function T(r){r.preventDefault(),e(_)!==null&&e(P)!==null&&X&&A.update(s=>{const d=[...s.preservation_order];d.splice(e(_),1);const B=e(P)>e(_)?e(P)-1:e(P);return d.splice(B,0,X),{...s,preservation_order:d}}),u(_,null),u(P,null),X=null,document.querySelectorAll(".dragging").forEach(s=>{s.classList.remove("dragging")})}function k(r){u(_,null),u(P,null),X=null,document.querySelectorAll(".dragging").forEach(s=>{s.classList.remove("dragging")})}ye(()=>b(),()=>{u(l,b())}),Me(),Ee();var x=It(),I=a(x),H=o(a(I),2),w=a(H);Pe(w,{size:18}),ve(),t(H),t(I);var C=o(I,2),E=a(C),V=o(E,2);j(()=>{e(c),je(()=>{e(l)})}),ke(V,5,()=>e(l).columns,ze,(r,s)=>{var d=At(),B={},K=a(d,!0);t(d),j(()=>{B!==(B=e(s))&&(d.value=(d.__value=e(s))==null?"":e(s)),ie(K,e(s))}),$(r,d)}),t(V);var oe=o(V,2);j(()=>{e(p),je(()=>{})}),ke(oe,5,()=>ae,ze,(r,s)=>{var d=Pt(),B={},K=a(d,!0);t(d),j(()=>{B!==(B=e(s).id)&&(d.value=(d.__value=e(s).id)==null?"":e(s).id),ie(K,e(s).name)}),$(r,d)}),t(oe);var Se=o(oe,2);{var $e=r=>{var s=Nt();Ne(s),Re(s,()=>e(v),d=>u(v,d)),$(r,s)};_e(Se,r=>{["Contains","DoesNotContain","Is","IsNot"].includes(e(p))&&r($e)})}t(C);var ue=o(C,2),ge=a(ue);ke(ge,1,()=>e(l).preservation_order,ze,(r,s,d)=>{var B=Dt();let K;var ne=a(B);let xe;var me=a(ne),Ae=a(me);dt(Ae,{size:18}),t(me);var de=o(me,2),g=a(de),W=o(g);{var ee=i=>{var m=Ye();j(U=>ie(m,U),[()=>{var U;return(U=ae.find(Ce=>Ce.id===e(s).operator))==null?void 0:U.name}],se),$(i,m)};_e(W,i=>{ae.some(m=>m.id===e(s).operator)&&i(ee)})}var J=o(W,2);{var ce=i=>{var m=Ye();j(()=>ie(m,`\`${e(s).variable??""}\``)),$(i,m)};_e(J,i=>{["Contains","DoesNotContain","Is","IsNot"].includes(e(s).operator)&&i(ce)})}t(de),t(ne);var n=o(ne,2);{var S=i=>{var m=Et();$(i,m)};_e(n,i=>{e(P)===d&&e(_)!==d&&i(S)})}t(B),j((i,m)=>{K=be(B,1,"item-container svelte-s9hvzz",null,K,{"drop-target":e(P)===d}),xe=be(ne,1,"list-item svelte-s9hvzz",null,xe,{"selected-item":i,"unselected-item":m}),ie(g,`${d+1}. ${e(s).column??""} `)},[()=>e(f).has(e(s)),()=>!e(f).has(e(s))],se),h("dragstart",ne,i=>Y(i,d)),h("dragend",ne,k),h("drop",ne,T),h("click",ne,()=>te(e(s))),h("dragenter",B,i=>re(i,d),!0),h("dragover",B,i=>R(i,d)),$(r,B)});var le=o(ge,2);let fe;var we=a(le);{var y=r=>{var s=Mt();$(r,s)};_e(we,r=>{e(P)===e(l).preservation_order.length&&r(y)})}t(le),t(ue),t(x),j(()=>fe=be(le,1,"end-drop-area svelte-s9hvzz",null,fe,{"drop-target":e(P)===e(l).preservation_order.length})),h("click",H,()=>Z([...e(f)])),h("click",E,G),Ge(V,()=>e(c),r=>u(c,r)),h("change",V,L),Ge(oe,()=>e(p),r=>u(p,r)),h("change",oe,N),h("dragenter",le,r=>{r.preventDefault(),u(P,e(l).preservation_order.length)}),h("dragover",le,r=>{r.preventDefault(),u(P,e(l).preservation_order.length)}),h("drop",le,T),$(O,x),Ie(),Q()}var Lt=F("<div> </div>"),qt=F('<select class="select-field" style="font-size: 10px; width: 100px; margin-left: -1px; text-align: center; text-align-last: center;"><option>Move All</option><option>Copy All</option></select>'),Ft=F('<select class="select-field" style="font-size: 10px; width: 100px; margin-left: -1px; text-align: center; text-align-last: center;"><option>Move Selected</option><option>Copy Selected</option></select>'),Ht=F("<div> </div>"),Rt=F('<div class="page-columns svelte-x1ifti"><div><div class="block svelte-x1ifti"><div class="header"><h2>Audiosuite Tags</h2> <button class="cta-button cancel"><!> Remove</button></div> <div class="bar"><button class="cta-button small">Add</button> <input type="text" id="find-text" placeholder="New Tag" class="input-field"></div> <div class="block inner svelte-x1ifti"><!></div></div></div> <div class="arrow-column svelte-x1ifti"><div class="move-button-container svelte-x1ifti"><button class="arrow-button svelte-x1ifti"><!></button> <span><!></span> <button class="arrow-button svelte-x1ifti"><!></button></div></div> <div><div class="block svelte-x1ifti"><div class="header"><h2>Filename Tags</h2> <button class="cta-button cancel"><!> Remove</button></div> <div class="bar"><button class="cta-button small">Add</button> <input type="text" id="find-text" placeholder="Add New String" class="input-field"></div> <div class="block inner svelte-x1ifti"><!></div></div></div></div>');function Vt(O,z){De(z,!1);const[D,Q]=qe(),b=()=>Te(A,"$preferencesStore",D),l=q();let f=q(),v=q(),p=q(new Set),c=q(new Set),_=q(!0);function P(n){e(p).has(n)?e(p).delete(n):e(p).add(n),u(p,new Set(e(p)))}function X(n){e(c).has(n)?e(c).delete(n):e(c).add(n),u(c,new Set(e(c)))}function ae(n){n.forEach(S=>te(S)),Z()}function te(n){A.update(S=>{const i=S.autoselects.filter(m=>m!==n);return{...S,autoselects:i}})}function Z(){e(p).clear(),u(p,new Set)}function M(n){e(l).autoselects.includes(n)||(Ue(l,e(l).autoselects=[...e(l).autoselects,n]),e(l).autoselects.sort(),A.set(e(l)),u(f,""))}function N(){A.update(n=>{let S=new Set(n.tags),i=new Set(n.autoselects);return e(p).size==0&&e(c).size==0?(n.autoselects.forEach(m=>S.add(m)),e(_)&&i.clear()):e(p).forEach(m=>{S.add(m),e(_)&&i.delete(m)}),{...n,tags:Array.from(S),autoselects:Array.from(i)}}),Z()}function L(){A.update(n=>{let S=new Set(n.autoselects),i=new Set(n.tags);return e(p).size==0&&e(c).size==0?(n.tags.forEach(m=>S.add(m)),e(_)&&i.clear()):e(c).forEach(m=>{S.add(m),e(_)&&i.delete(m)}),{...n,tags:Array.from(i),autoselects:Array.from(S)}}),R()}function G(n){e(l).tags.includes(n)||(Ue(l,e(l).tags=[...e(l).tags,n]),e(l).tags.sort(),A.set(e(l)),u(v,""))}function Y(n){n.forEach(S=>re(S)),R()}function R(){e(c).clear(),u(c,new Set)}function re(n){A.update(S=>{const i=S.tags.filter(m=>m!==n);return{...S,tags:i}})}ye(()=>b(),()=>{u(l,b())}),Me(),Ee();var T=Rt(),k=a(T),x=a(k),I=a(x),H=o(a(I),2),w=a(H);Pe(w,{size:"18"}),ve(),t(H),t(I);var C=o(I,2),E=a(C),V=o(E,2);Ne(V),t(C);var oe=o(C,2),Se=a(oe);const $e=se(()=>Array.from(e(l).tags));Ze(Se,{get items(){return e($e)},children:We,$$slots:{default:(n,S)=>{const i=se(()=>S.item);var m=Lt();let U;var Ce=a(m,!0);t(m),j((Ve,Be)=>{U=be(m,1,"list-item",null,U,{"selected-item":Ve,"unselected-item":Be}),ie(Ce,e(i))},[()=>e(c).has(e(i)),()=>!e(c).has(e(i))],se),h("click",m,()=>X(e(i))),$(n,m)}}}),t(oe),t(x),t(k);var ue=o(k,2),ge=a(ue),le=a(ge),fe=a(le);rt(fe,{size:"100"}),t(le);var we=o(le,2),y=a(we);{var r=n=>{var S=qt();j(()=>{e(_),je(()=>{})});var i=a(S);i.value=(i.__value=!0)==null?"":!0;var m=o(i);m.value=(m.__value=!1)==null?"":!1,t(S),Ge(S,()=>e(_),U=>u(_,U)),$(n,S)},s=n=>{var S=Ft();j(()=>{e(_),je(()=>{})});var i=a(S);i.value=(i.__value=!0)==null?"":!0;var m=o(i);m.value=(m.__value=!1)==null?"":!1,t(S),Ge(S,()=>e(_),U=>u(_,U)),$(n,S)};_e(y,n=>{e(p).size===0&&e(c).size==0?n(r):n(s,!1)})}t(we);var d=o(we,2),B=a(d);at(B,{size:"100"}),t(d),t(ge),t(ue);var K=o(ue,2),ne=a(K),xe=a(ne),me=o(a(xe),2),Ae=a(me);Pe(Ae,{size:"18"}),ve(),t(me),t(xe);var de=o(xe,2),g=a(de),W=o(g,2);Ne(W),t(de);var ee=o(de,2),J=a(ee);const ce=se(()=>Array.from(e(l).autoselects));Ze(J,{get items(){return e(ce)},children:We,$$slots:{default:(n,S)=>{const i=se(()=>S.item);var m=Ht();let U;var Ce=a(m,!0);t(m),j((Ve,Be)=>{U=be(m,1,"list-item",null,U,{"selected-item":Ve,"unselected-item":Be}),ie(Ce,e(i))},[()=>e(p).has(e(i)),()=>!e(p).has(e(i))],se),h("click",m,()=>P(e(i))),$(n,m)}}}),t(ee),t(ne),t(K),t(T),h("click",H,()=>Y([...e(c)])),h("click",E,()=>G(e(v))),Re(V,()=>e(v),n=>u(v,n)),h("click",le,()=>L()),h("click",d,()=>N()),h("click",me,()=>ae([...e(p)])),h("click",g,()=>M(e(f))),Re(W,()=>e(f),n=>u(f,n)),$(O,T),Ie(),Q()}var Bt=F('<div class="color-item svelte-1r8qzsg"><div class="color-details svelte-1r8qzsg"><span class="color-label svelte-1r8qzsg"> </span></div> <div class="color-swatch svelte-1r8qzsg"><div class="swatch-box svelte-1r8qzsg"><input type="color" class="color-input svelte-1r8qzsg"></div> <div class="hex-value svelte-1r8qzsg"> </div></div></div>'),jt=F('<div class="block svelte-1r8qzsg"><div class="header"><h2>Colors</h2> <button class="cta-button cancel">Reset Defaults</button></div> <div class="bar"></div> <div class="block inner svelte-1r8qzsg"><div class="color-grid svelte-1r8qzsg"></div></div></div> z',1);function Zt(O,z){De(z,!1);const[D,Q]=qe(),b=()=>Te(A,"$preferencesStore",D),l=q();async function f(M,N){A.update(G=>{const Y={...G.colors,[M]:N};return{...G,colors:Y}});const L=`--${M.replace(/([A-Z])/g,"-$1").toLowerCase()}`;document.documentElement.style.setProperty(L,N),await ct("color-updated",{colorKey:M,cssVariable:L,newColor:N}),console.log(`Updated ${M} (${L}) to ${N}`)}const v=[{key:"primaryBg",label:"Primary Background"},{key:"secondaryBg",label:"Secondary Background"},{key:"textColor",label:"Text Color"},{key:"topbarColor",label:"Topbar Color"},{key:"accentColor",label:"Accent Color"},{key:"hoverColor",label:"Hover Color"},{key:"warningColor",label:"Warning Color"},{key:"warningHover",label:"Warning Hover Color"},{key:"inactiveColor",label:"Inactive Color"}];function p(M){var N;return((N=e(l))==null?void 0:N.colors[M])||""}function c(){const M={primaryBg:"#2e3a47",secondaryBg:"#1f2731",textColor:"#ffffff",topbarColor:"#FFB81C",accentColor:"#f0a500",hoverColor:"#ffcc00",warningColor:"#b91c1c",warningHover:"#dc2626",inactiveColor:"#888888"};A.update(N=>({...N,colors:M}));for(const{key:N}of v){const L=`--${N.replace(/([A-Z])/g,"-$1").toLowerCase()}`,G=M[N];document.documentElement.style.setProperty(L,G)}}ye(()=>b(),()=>{u(l,b())}),Me(),Ee();var _=jt(),P=pe(_),X=a(P),ae=o(a(X),2);t(X);var te=o(X,4),Z=a(te);ke(Z,5,()=>v,ze,(M,N)=>{let L=()=>e(N).key,G=()=>e(N).label;var Y=Bt(),R=a(Y),re=a(R),T=a(re,!0);t(re),t(R);var k=o(R,2),x=a(k),I=a(x);Ne(I),t(x);var H=o(x,2),w=a(H,!0);t(H),t(k),t(Y),j(C=>{ie(T,G()),nt(x,"style",`background-color: ${C??""};`),it(I,C),ie(w,C)},[()=>p(L())],se),h("input",I,C=>f(L(),C.target.value)),$(M,Y)}),t(Z),t(te),t(P),ve(),h("click",ae,c),$(O,_),Ie(),Q()}var Gt=F("<option> </option>"),Wt=F('<div class="app-container svelte-affvot"><div class="top-bar svelte-affvot"><div class="top-bar-left svelte-affvot"><button><div class="flex items-center gap-2"><!> <span>Match Criteria</span></div></button> <button><div class="flex items-center gap-2"><!> <span>Preservation Order</span></div></button> <button><div class="flex items-center gap-2"><!> <span>Tags Manager</span></div></button> <button><div class="flex items-center gap-2"><!> <span>Colors</span></div></button></div></div> <main class="content svelte-affvot" style="margin-bottom: 0px"><div><!></div> <div class="bar svelte-affvot" style="width: calc(100% + 40px); margin-top: 16px; margin-left: -20px; margin-right: 20px;"><button class="cta-button small" style="margin-left: 30px">Save:</button> <input type="text" class="input-field" placeholder="Enter New Configuraion Preset Name" style=" margin-right: 10px;"> <select class="select-field" style="margin-right: 10px"></select> <button class="cta-button small cancel" style="margin-right: 25px;">Delete</button></div></main></div> <footer>TESTING</footer>',1);function ta(O,z){De(z,!1);const[D,Q]=qe(),b=()=>Te(A,"$preferencesStore",D),l=()=>Te(Je,"$PresetsStore",D),f=q(),v=q();let p=q(),c=q(""),_=ot(z,"activeTab",12,"matchCriteria");function P(){var r;const y=(r=e(p))==null?void 0:r.trim();if(y){if(y==="Default"){console.log("Cannot update or save the Default preset.");return}const s=e(v).findIndex(d=>d.name===y);s!==-1?(Je.update(d=>(d[s].pref=Xe(A),[...d])),console.log("Preset updated:",y)):(Je.update(d=>[...d,{name:y,pref:Xe(A)}]),console.log("Preset saved:",y)),u(c,y),u(p,"")}}function X(){if(e(c)==="Default"){const r=vt;A.set(r),Object.entries(r.colors).forEach(([s,d])=>{const B=`--${s.replace(/([A-Z])/g,"-$1").toLowerCase()}`;document.documentElement.style.setProperty(B,d)}),console.log("Default preferences restored");return}const y=e(v).find(r=>r.name===e(c));y&&(A.set(y.pref),Object.entries(y.pref.colors).forEach(([r,s])=>{const d=`--${r.replace(/([A-Z])/g,"-$1").toLowerCase()}`;document.documentElement.style.setProperty(d,s)}),console.log("Preset loaded:",y))}function ae(){if(!e(c)||e(c)==="Default"){console.log("Cannot delete the Default preset.");return}Je.update(y=>y.filter(r=>r.name!==e(c))),console.log("Preset deleted:",e(c)),u(c,"")}tt(()=>{const y=Xe(A);y!=null&&y.colors&&Object.entries(y.colors).forEach(([r,s])=>{const d=`--${r.replace(/([A-Z])/g,"-$1").toLowerCase()}`;document.documentElement.style.setProperty(d,s)}),console.log("Preferences window mounted, colors updated")}),ye(()=>st(_()),()=>{console.log("Active Tab:",_())}),ye(()=>b(),()=>{u(f,b())}),ye(()=>l(),()=>{u(v,l())}),Me(),Ee();var te=Wt(),Z=pe(te),M=a(Z),N=a(M),L=a(N),G=a(L),Y=a(G);ut(Y,{size:18}),ve(2),t(G),t(L);var R=o(L,2),re=a(R),T=a(re);ft(T,{size:18}),ve(2),t(re),t(R);var k=o(R,2),x=a(k),I=a(x);_t(I,{size:18}),ve(2),t(x),t(k);var H=o(k,2),w=a(H),C=a(w);pt(C,{size:18}),ve(2),t(w),t(H),t(N),t(M);var E=o(M,2),V=a(E),oe=a(V);{var Se=y=>{wt(y,{})},$e=y=>{var r=he(),s=pe(r);{var d=K=>{Tt(K,{})},B=K=>{var ne=he(),xe=pe(ne);{var me=de=>{Ot(de,{})},Ae=de=>{var g=he(),W=pe(g);{var ee=ce=>{Vt(ce,{})},J=ce=>{var n=he(),S=pe(n);{var i=U=>{bt(U,{})},m=U=>{var Ce=he(),Ve=pe(Ce);{var Be=Qe=>{Zt(Qe,{})};_e(Ve,Qe=>{_()==="colors"&&Qe(Be)},!0)}$(U,Ce)};_e(S,U=>{_()==="autoSelect"?U(i):U(m,!1)},!0)}$(ce,n)};_e(W,ce=>{_()==="audiosuiteTags"?ce(ee):ce(J,!1)},!0)}$(de,g)};_e(xe,de=>{_()==="preservationOrder"?de(me):de(Ae,!1)},!0)}$(K,ne)};_e(s,K=>{_()==="matchCriteria"?K(d):K(B,!1)},!0)}$(y,r)};_e(oe,y=>{_()==="mainPref"?y(Se):y($e,!1)})}t(V);var ue=o(V,2),ge=a(ue),le=o(ge,2);Ne(le);var fe=o(le,2);j(()=>{e(c),je(()=>{e(v)})}),ke(fe,5,()=>e(v),ze,(y,r)=>{var s=Gt(),d={},B=a(s,!0);t(s),j(()=>{d!==(d=e(r).name)&&(s.value=(s.__value=e(r).name)==null?"":e(r).name),ie(B,e(r).name)}),$(y,s)}),t(fe);var we=o(fe,2);t(ue),t(E),t(Z),ve(2),j(()=>{be(L,1,`nav-link ${(_()==="matchCriteria"?"active":"")??""}`),be(R,1,`nav-link ${(_()==="preservationOrder"?"active":"")??""}`),be(k,1,`nav-link ${(_()==="Tags Editor"?"active":"")??""}`),be(H,1,`nav-link ${(_()==="colors"?"active":"")??""}`)}),h("click",L,()=>_("matchCriteria")),h("click",R,()=>_("preservationOrder")),h("click",k,()=>_("audiosuiteTags")),h("click",H,()=>_("colors")),h("click",ge,P),Re(le,()=>e(p),y=>u(p,y)),Ge(fe,()=>e(c),y=>u(c,y)),h("change",fe,X),h("click",we,ae),$(O,te),Ie(),Q()}export{ta as component};
