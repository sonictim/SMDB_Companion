import{c as ce,a as w,t as R,d as ra}from"../chunks/mBltkime.js";import{i as ft}from"../chunks/D5lfpR5M.js";import{l as Jt,F as Xa,aO as Za,i as Na,aP as Ya,U as oa,aE as Qt,J as ca,a1 as da,_ as Ia,ag as ua,af as va,aQ as ha,c as Ba,W as ei,j as ti,X as Xt,as as ai,m as ii,o as j,p as _t,av as Ve,L as z,aw as V,ax as za,s as o,w as b,v as r,g as a,t as H,a4 as pt,ay as B,aA as wt,b as et,q as mt,az as Ue}from"../chunks/4B8pOMzx.js";import{s as ie,e as C}from"../chunks/saORRO85.js";import{l as Ge,s as He,p as ee,f as ni,c as bt,i as A,g as li,h as Zt,d as $a,b as si}from"../chunks/BCDoIWnn.js";import{I as Ke,s as qe,l as fe,R as ri,m as l,n as Ft,o as na,j as Ca,q as Pa,T as le,p as we,t as tt,e as nt,a as Ye,u as La,S as lt,d as st,r as Fe,b as Te,i as rt,f as Pt,g as ht,O as pa,V as oi,v as ta}from"../chunks/DWEiHpCd.js";import{w as Aa,g as be,o as Lt,i as ci}from"../chunks/CgHLDJKd.js";const Nt=0,Ct=1,Yt=2;function di(t,e,i,n,u){Jt&&Xa();var f=t,c=Za(),g=Ba,M=oa,x,$,J,G=(c?ca:da)(void 0),te=(c?ca:da)(void 0),Q=!1;function F(_,O){Q=!0,O&&(ua(X),va(X),ha(g));try{_===Ct&&n&&($?ei($):$=ti(()=>n(f,G))),_!==Nt&&x&&Xt(x,()=>x=null),_!==Ct&&$&&Xt($,()=>$=null),_!==Yt&&J&&Xt(J,()=>J=null)}finally{O&&(ha(null),va(null),ua(null),ai())}}var X=Na(()=>{if(M!==(M=e())){if(Ya(M)){var _=M;Q=!1,_.then(O=>{_===M&&(Qt(G,O),F(Ct,!0))},O=>{if(_===M)throw Qt(te,O),F(Yt,!0),te.v}),Jt||Ia(()=>{Q||F(Nt,!0)})}else Qt(G,M),F(Ct,!1);return()=>M=oa}});Jt&&(f=ii)}function ui(t,e){const i=Ge(e,["children","$$slots","$$events","$$legacy"]);Ke(t,He({name:"database"},()=>i,{iconNode:[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5"}],["path",{d:"M3 12A9 3 0 0 0 21 12"}]],children:(u,f)=>{var c=ce(),g=j(c);qe(g,e,"default",{},null),w(u,c)},$$slots:{default:!0}}))}function vi(t,e){const i=Ge(e,["children","$$slots","$$events","$$legacy"]);Ke(t,He({name:"files"},()=>i,{iconNode:[["path",{d:"M20 7h-3a2 2 0 0 1-2-2V2"}],["path",{d:"M9 18a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h7l4 4v10a2 2 0 0 1-2 2Z"}],["path",{d:"M3 7.6v12.8A1.6 1.6 0 0 0 4.6 22h9.8"}]],children:(u,f)=>{var c=ce(),g=j(c);qe(g,e,"default",{},null),w(u,c)},$$slots:{default:!0}}))}function hi(t,e){const i=Ge(e,["children","$$slots","$$events","$$legacy"]);Ke(t,He({name:"notebook-pen"},()=>i,{iconNode:[["path",{d:"M13.4 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-7.4"}],["path",{d:"M2 6h4"}],["path",{d:"M2 10h4"}],["path",{d:"M2 14h4"}],["path",{d:"M2 18h4"}],["path",{d:"M21.378 5.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z"}]],children:(u,f)=>{var c=ce(),g=j(c);qe(g,e,"default",{},null),w(u,c)},$$slots:{default:!0}}))}function Ze(t,e){const i=Ge(e,["children","$$slots","$$events","$$legacy"]);Ke(t,He({name:"search"},()=>i,{iconNode:[["circle",{cx:"11",cy:"11",r:"8"}],["path",{d:"m21 21-4.3-4.3"}]],children:(u,f)=>{var c=ce(),g=j(c);qe(g,e,"default",{},null),w(u,c)},$$slots:{default:!0}}))}function pi(t,e){const i=Ge(e,["children","$$slots","$$events","$$legacy"]);Ke(t,He({name:"settings-2"},()=>i,{iconNode:[["path",{d:"M20 7h-9"}],["path",{d:"M14 17H5"}],["circle",{cx:"17",cy:"17",r:"3"}],["circle",{cx:"7",cy:"7",r:"3"}]],children:(u,f)=>{var c=ce(),g=j(c);qe(g,e,"default",{},null),w(u,c)},$$slots:{default:!0}}))}function ba(t,e){const i=Ge(e,["children","$$slots","$$events","$$legacy"]);Ke(t,He({name:"triangle-alert"},()=>i,{iconNode:[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"}],["path",{d:"M12 9v4"}],["path",{d:"M12 17h.01"}]],children:(u,f)=>{var c=ce(),g=j(c);qe(g,e,"default",{},null),w(u,c)},$$slots:{default:!0}}))}function bi(t,e){const i=Ge(e,["children","$$slots","$$events","$$legacy"]);Ke(t,He({name:"volume-2"},()=>i,{iconNode:[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z"}],["path",{d:"M16 9a5 5 0 0 1 0 6"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728"}]],children:(u,f)=>{var c=ce(),g=j(c);qe(g,e,"default",{},null),w(u,c)},$$slots:{default:!0}}))}function gi(t,e){const i=Ge(e,["children","$$slots","$$events","$$legacy"]);Ke(t,He({name:"x"},()=>i,{iconNode:[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]],children:(u,f)=>{var c=ce(),g=j(c);qe(g,e,"default",{},null),w(u,c)},$$slots:{default:!0}}))}class Fa{constructor(...e){this.type="Logical",e.length===1?"Logical"in e[0]?(this.width=e[0].Logical.width,this.height=e[0].Logical.height):(this.width=e[0].width,this.height=e[0].height):(this.width=e[0],this.height=e[1])}toPhysical(e){return new ot(this.width*e,this.height*e)}[fe](){return{width:this.width,height:this.height}}toJSON(){return this[fe]()}}class ot{constructor(...e){this.type="Physical",e.length===1?"Physical"in e[0]?(this.width=e[0].Physical.width,this.height=e[0].Physical.height):(this.width=e[0].width,this.height=e[0].height):(this.width=e[0],this.height=e[1])}toLogical(e){return new Fa(this.width/e,this.height/e)}[fe](){return{width:this.width,height:this.height}}toJSON(){return this[fe]()}}class Oe{constructor(e){this.size=e}toLogical(e){return this.size instanceof Fa?this.size:this.size.toLogical(e)}toPhysical(e){return this.size instanceof ot?this.size:this.size.toPhysical(e)}[fe](){return{[`${this.size.type}`]:{width:this.size.width,height:this.size.height}}}toJSON(){return this[fe]()}}class Ta{constructor(...e){this.type="Logical",e.length===1?"Logical"in e[0]?(this.x=e[0].Logical.x,this.y=e[0].Logical.y):(this.x=e[0].x,this.y=e[0].y):(this.x=e[0],this.y=e[1])}toPhysical(e){return new ge(this.x*e,this.y*e)}[fe](){return{x:this.x,y:this.y}}toJSON(){return this[fe]()}}class ge{constructor(...e){this.type="Physical",e.length===1?"Physical"in e[0]?(this.x=e[0].Physical.x,this.y=e[0].Physical.y):(this.x=e[0].x,this.y=e[0].y):(this.x=e[0],this.y=e[1])}toLogical(e){return new Ta(this.x/e,this.y/e)}[fe](){return{x:this.x,y:this.y}}toJSON(){return this[fe]()}}class at{constructor(e){this.position=e}toLogical(e){return this.position instanceof Ta?this.position:this.position.toLogical(e)}toPhysical(e){return this.position instanceof ge?this.position:this.position.toPhysical(e)}[fe](){return{[`${this.position.type}`]:{x:this.position.x,y:this.position.y}}}toJSON(){return this[fe]()}}class gt extends ri{constructor(e){super(e)}static async new(e,i,n){return l("plugin:image|new",{rgba:At(e),width:i,height:n}).then(u=>new gt(u))}static async fromBytes(e){return l("plugin:image|from_bytes",{bytes:At(e)}).then(i=>new gt(i))}static async fromPath(e){return l("plugin:image|from_path",{path:e}).then(i=>new gt(i))}async rgba(){return l("plugin:image|rgba",{rid:this.rid}).then(e=>new Uint8Array(e))}async size(){return l("plugin:image|size",{rid:this.rid})}}function At(t){return t==null?null:typeof t=="string"?t:t instanceof gt?t.rid:t}var aa;(function(t){t[t.Critical=1]="Critical",t[t.Informational=2]="Informational"})(aa||(aa={}));class wi{constructor(e){this._preventDefault=!1,this.event=e.event,this.id=e.id}preventDefault(){this._preventDefault=!0}isPreventDefault(){return this._preventDefault}}var ga;(function(t){t.None="none",t.Normal="normal",t.Indeterminate="indeterminate",t.Paused="paused",t.Error="error"})(ga||(ga={}));function Ea(){return new yt(window.__TAURI_INTERNALS__.metadata.currentWindow.label,{skip:!0})}async function It(){return l("plugin:window|get_all_windows").then(t=>t.map(e=>new yt(e,{skip:!0})))}const Bt=["tauri://created","tauri://error"];class yt{constructor(e,i={}){var n;this.label=e,this.listeners=Object.create(null),i!=null&&i.skip||l("plugin:window|create",{options:{...i,parent:typeof i.parent=="string"?i.parent:(n=i.parent)===null||n===void 0?void 0:n.label,label:e}}).then(async()=>this.emit("tauri://created")).catch(async u=>this.emit("tauri://error",u))}static async getByLabel(e){var i;return(i=(await It()).find(n=>n.label===e))!==null&&i!==void 0?i:null}static getCurrent(){return Ea()}static async getAll(){return It()}static async getFocusedWindow(){for(const e of await It())if(await e.isFocused())return e;return null}async listen(e,i){return this._handleTauriEvent(e,i)?()=>{const n=this.listeners[e];n.splice(n.indexOf(i),1)}:Ft(e,i,{target:{kind:"Window",label:this.label}})}async once(e,i){return this._handleTauriEvent(e,i)?()=>{const n=this.listeners[e];n.splice(n.indexOf(i),1)}:na(e,i,{target:{kind:"Window",label:this.label}})}async emit(e,i){if(Bt.includes(e)){for(const n of this.listeners[e]||[])n({event:e,id:-1,payload:i});return}return Ca(e,i)}async emitTo(e,i,n){if(Bt.includes(i)){for(const u of this.listeners[i]||[])u({event:i,id:-1,payload:n});return}return Pa(e,i,n)}_handleTauriEvent(e,i){return Bt.includes(e)?(e in this.listeners?this.listeners[e].push(i):this.listeners[e]=[i],!0):!1}async scaleFactor(){return l("plugin:window|scale_factor",{label:this.label})}async innerPosition(){return l("plugin:window|inner_position",{label:this.label}).then(e=>new ge(e))}async outerPosition(){return l("plugin:window|outer_position",{label:this.label}).then(e=>new ge(e))}async innerSize(){return l("plugin:window|inner_size",{label:this.label}).then(e=>new ot(e))}async outerSize(){return l("plugin:window|outer_size",{label:this.label}).then(e=>new ot(e))}async isFullscreen(){return l("plugin:window|is_fullscreen",{label:this.label})}async isMinimized(){return l("plugin:window|is_minimized",{label:this.label})}async isMaximized(){return l("plugin:window|is_maximized",{label:this.label})}async isFocused(){return l("plugin:window|is_focused",{label:this.label})}async isDecorated(){return l("plugin:window|is_decorated",{label:this.label})}async isResizable(){return l("plugin:window|is_resizable",{label:this.label})}async isMaximizable(){return l("plugin:window|is_maximizable",{label:this.label})}async isMinimizable(){return l("plugin:window|is_minimizable",{label:this.label})}async isClosable(){return l("plugin:window|is_closable",{label:this.label})}async isVisible(){return l("plugin:window|is_visible",{label:this.label})}async title(){return l("plugin:window|title",{label:this.label})}async theme(){return l("plugin:window|theme",{label:this.label})}async center(){return l("plugin:window|center",{label:this.label})}async requestUserAttention(e){let i=null;return e&&(e===aa.Critical?i={type:"Critical"}:i={type:"Informational"}),l("plugin:window|request_user_attention",{label:this.label,value:i})}async setResizable(e){return l("plugin:window|set_resizable",{label:this.label,value:e})}async setEnabled(e){return l("plugin:window|set_enabled",{label:this.label,value:e})}async isEnabled(){return l("plugin:window|is_enabled",{label:this.label})}async setMaximizable(e){return l("plugin:window|set_maximizable",{label:this.label,value:e})}async setMinimizable(e){return l("plugin:window|set_minimizable",{label:this.label,value:e})}async setClosable(e){return l("plugin:window|set_closable",{label:this.label,value:e})}async setTitle(e){return l("plugin:window|set_title",{label:this.label,value:e})}async maximize(){return l("plugin:window|maximize",{label:this.label})}async unmaximize(){return l("plugin:window|unmaximize",{label:this.label})}async toggleMaximize(){return l("plugin:window|toggle_maximize",{label:this.label})}async minimize(){return l("plugin:window|minimize",{label:this.label})}async unminimize(){return l("plugin:window|unminimize",{label:this.label})}async show(){return l("plugin:window|show",{label:this.label})}async hide(){return l("plugin:window|hide",{label:this.label})}async close(){return l("plugin:window|close",{label:this.label})}async destroy(){return l("plugin:window|destroy",{label:this.label})}async setDecorations(e){return l("plugin:window|set_decorations",{label:this.label,value:e})}async setShadow(e){return l("plugin:window|set_shadow",{label:this.label,value:e})}async setEffects(e){return l("plugin:window|set_effects",{label:this.label,value:e})}async clearEffects(){return l("plugin:window|set_effects",{label:this.label,value:null})}async setAlwaysOnTop(e){return l("plugin:window|set_always_on_top",{label:this.label,value:e})}async setAlwaysOnBottom(e){return l("plugin:window|set_always_on_bottom",{label:this.label,value:e})}async setContentProtected(e){return l("plugin:window|set_content_protected",{label:this.label,value:e})}async setSize(e){return l("plugin:window|set_size",{label:this.label,value:e instanceof Oe?e:new Oe(e)})}async setMinSize(e){return l("plugin:window|set_min_size",{label:this.label,value:e instanceof Oe?e:e?new Oe(e):null})}async setMaxSize(e){return l("plugin:window|set_max_size",{label:this.label,value:e instanceof Oe?e:e?new Oe(e):null})}async setSizeConstraints(e){function i(n){return n?{Logical:n}:null}return l("plugin:window|set_size_constraints",{label:this.label,value:{minWidth:i(e==null?void 0:e.minWidth),minHeight:i(e==null?void 0:e.minHeight),maxWidth:i(e==null?void 0:e.maxWidth),maxHeight:i(e==null?void 0:e.maxHeight)}})}async setPosition(e){return l("plugin:window|set_position",{label:this.label,value:e instanceof at?e:new at(e)})}async setFullscreen(e){return l("plugin:window|set_fullscreen",{label:this.label,value:e})}async setFocus(){return l("plugin:window|set_focus",{label:this.label})}async setIcon(e){return l("plugin:window|set_icon",{label:this.label,value:At(e)})}async setSkipTaskbar(e){return l("plugin:window|set_skip_taskbar",{label:this.label,value:e})}async setCursorGrab(e){return l("plugin:window|set_cursor_grab",{label:this.label,value:e})}async setCursorVisible(e){return l("plugin:window|set_cursor_visible",{label:this.label,value:e})}async setCursorIcon(e){return l("plugin:window|set_cursor_icon",{label:this.label,value:e})}async setBackgroundColor(e){return l("plugin:window|set_background_color",{color:e})}async setCursorPosition(e){return l("plugin:window|set_cursor_position",{label:this.label,value:e instanceof at?e:new at(e)})}async setIgnoreCursorEvents(e){return l("plugin:window|set_ignore_cursor_events",{label:this.label,value:e})}async startDragging(){return l("plugin:window|start_dragging",{label:this.label})}async startResizeDragging(e){return l("plugin:window|start_resize_dragging",{label:this.label,value:e})}async setBadgeCount(e){return l("plugin:window|set_badge_count",{label:this.label,value:e})}async setBadgeLabel(e){return l("plugin:window|set_badge_label",{label:this.label,value:e})}async setOverlayIcon(e){return l("plugin:window|set_overlay_icon",{label:this.label,value:e?At(e):void 0})}async setProgressBar(e){return l("plugin:window|set_progress_bar",{label:this.label,value:e})}async setVisibleOnAllWorkspaces(e){return l("plugin:window|set_visible_on_all_workspaces",{label:this.label,value:e})}async setTitleBarStyle(e){return l("plugin:window|set_title_bar_style",{label:this.label,value:e})}async setTheme(e){return l("plugin:window|set_theme",{label:this.label,value:e})}async onResized(e){return this.listen(le.WINDOW_RESIZED,i=>{i.payload=new ot(i.payload),e(i)})}async onMoved(e){return this.listen(le.WINDOW_MOVED,i=>{i.payload=new ge(i.payload),e(i)})}async onCloseRequested(e){return this.listen(le.WINDOW_CLOSE_REQUESTED,async i=>{const n=new wi(i);await e(n),n.isPreventDefault()||await this.destroy()})}async onDragDropEvent(e){const i=await this.listen(le.DRAG_ENTER,c=>{e({...c,payload:{type:"enter",paths:c.payload.paths,position:new ge(c.payload.position)}})}),n=await this.listen(le.DRAG_OVER,c=>{e({...c,payload:{type:"over",position:new ge(c.payload.position)}})}),u=await this.listen(le.DRAG_DROP,c=>{e({...c,payload:{type:"drop",paths:c.payload.paths,position:new ge(c.payload.position)}})}),f=await this.listen(le.DRAG_LEAVE,c=>{e({...c,payload:{type:"leave"}})});return()=>{i(),u(),n(),f()}}async onFocusChanged(e){const i=await this.listen(le.WINDOW_FOCUS,u=>{e({...u,payload:!0})}),n=await this.listen(le.WINDOW_BLUR,u=>{e({...u,payload:!1})});return()=>{i(),n()}}async onScaleChanged(e){return this.listen(le.WINDOW_SCALE_FACTOR_CHANGED,e)}async onThemeChanged(e){return this.listen(le.WINDOW_THEME_CHANGED,e)}}var wa;(function(t){t.Disabled="disabled",t.Throttle="throttle",t.Suspend="suspend"})(wa||(wa={}));var fa;(function(t){t.AppearanceBased="appearanceBased",t.Light="light",t.Dark="dark",t.MediumLight="mediumLight",t.UltraDark="ultraDark",t.Titlebar="titlebar",t.Selection="selection",t.Menu="menu",t.Popover="popover",t.Sidebar="sidebar",t.HeaderView="headerView",t.Sheet="sheet",t.WindowBackground="windowBackground",t.HudWindow="hudWindow",t.FullScreenUI="fullScreenUI",t.Tooltip="tooltip",t.ContentBackground="contentBackground",t.UnderWindowBackground="underWindowBackground",t.UnderPageBackground="underPageBackground",t.Mica="mica",t.Blur="blur",t.Acrylic="acrylic",t.Tabbed="tabbed",t.TabbedDark="tabbedDark",t.TabbedLight="tabbedLight"})(fa||(fa={}));var _a;(function(t){t.FollowsWindowActiveState="followsWindowActiveState",t.Active="active",t.Inactive="inactive"})(_a||(_a={}));function Wa(){return new la(Ea(),window.__TAURI_INTERNALS__.metadata.currentWebview.label,{skip:!0})}async function ma(){return l("plugin:webview|get_all_webviews").then(t=>t.map(e=>new la(new yt(e.windowLabel,{skip:!0}),e.label,{skip:!0})))}const ea=["tauri://created","tauri://error"];class la{constructor(e,i,n){this.window=e,this.label=i,this.listeners=Object.create(null),n!=null&&n.skip||l("plugin:webview|create_webview",{windowLabel:e.label,label:i,options:n}).then(async()=>this.emit("tauri://created")).catch(async u=>this.emit("tauri://error",u))}static async getByLabel(e){var i;return(i=(await ma()).find(n=>n.label===e))!==null&&i!==void 0?i:null}static getCurrent(){return Wa()}static async getAll(){return ma()}async listen(e,i){return this._handleTauriEvent(e,i)?()=>{const n=this.listeners[e];n.splice(n.indexOf(i),1)}:Ft(e,i,{target:{kind:"Webview",label:this.label}})}async once(e,i){return this._handleTauriEvent(e,i)?()=>{const n=this.listeners[e];n.splice(n.indexOf(i),1)}:na(e,i,{target:{kind:"Webview",label:this.label}})}async emit(e,i){if(ea.includes(e)){for(const n of this.listeners[e]||[])n({event:e,id:-1,payload:i});return}return Ca(e,i)}async emitTo(e,i,n){if(ea.includes(i)){for(const u of this.listeners[i]||[])u({event:i,id:-1,payload:n});return}return Pa(e,i,n)}_handleTauriEvent(e,i){return ea.includes(e)?(e in this.listeners?this.listeners[e].push(i):this.listeners[e]=[i],!0):!1}async position(){return l("plugin:webview|webview_position",{label:this.label}).then(e=>new ge(e))}async size(){return l("plugin:webview|webview_size",{label:this.label}).then(e=>new ot(e))}async close(){return l("plugin:webview|close",{label:this.label})}async setSize(e){return l("plugin:webview|set_webview_size",{label:this.label,value:e instanceof Oe?e:new Oe(e)})}async setPosition(e){return l("plugin:webview|set_webview_position",{label:this.label,value:e instanceof at?e:new at(e)})}async setFocus(){return l("plugin:webview|set_webview_focus",{label:this.label})}async hide(){return l("plugin:webview|webview_hide",{label:this.label})}async show(){return l("plugin:webview|webview_show",{label:this.label})}async setZoom(e){return l("plugin:webview|set_webview_zoom",{label:this.label,value:e})}async reparent(e){return l("plugin:webview|reparent",{label:this.label,window:typeof e=="string"?e:e.label})}async clearAllBrowsingData(){return l("plugin:webview|clear_all_browsing_data")}async setBackgroundColor(e){return l("plugin:webview|set_webview_background_color",{color:e})}async onDragDropEvent(e){const i=await this.listen(le.DRAG_ENTER,c=>{e({...c,payload:{type:"enter",paths:c.payload.paths,position:new ge(c.payload.position)}})}),n=await this.listen(le.DRAG_OVER,c=>{e({...c,payload:{type:"over",position:new ge(c.payload.position)}})}),u=await this.listen(le.DRAG_DROP,c=>{e({...c,payload:{type:"drop",paths:c.payload.paths,position:new ge(c.payload.position)}})}),f=await this.listen(le.DRAG_LEAVE,c=>{e({...c,payload:{type:"leave"}})});return()=>{i(),u(),n(),f()}}}function fi(){const t=Wa();return new ct(t.label,{skip:!0})}async function ya(){return l("plugin:window|get_all_windows").then(t=>t.map(e=>new ct(e,{skip:!0})))}class ct{constructor(e,i={}){var n;this.label=e,this.listeners=Object.create(null),i!=null&&i.skip||l("plugin:webview|create_webview_window",{options:{...i,parent:typeof i.parent=="string"?i.parent:(n=i.parent)===null||n===void 0?void 0:n.label,label:e}}).then(async()=>this.emit("tauri://created")).catch(async u=>this.emit("tauri://error",u))}static async getByLabel(e){var i;const n=(i=(await ya()).find(u=>u.label===e))!==null&&i!==void 0?i:null;return n?new ct(n.label,{skip:!0}):null}static getCurrent(){return fi()}static async getAll(){return ya()}async listen(e,i){return this._handleTauriEvent(e,i)?()=>{const n=this.listeners[e];n.splice(n.indexOf(i),1)}:Ft(e,i,{target:{kind:"WebviewWindow",label:this.label}})}async once(e,i){return this._handleTauriEvent(e,i)?()=>{const n=this.listeners[e];n.splice(n.indexOf(i),1)}:na(e,i,{target:{kind:"WebviewWindow",label:this.label}})}async setBackgroundColor(e){return l("plugin:window|set_background_color",{color:e}).then(()=>l("plugin:webview|set_webview_background_color",{color:e}))}}_i(ct,[yt,la]);function _i(t,e){(Array.isArray(e)?e:[e]).forEach(i=>{Object.getOwnPropertyNames(i.prototype).forEach(n=>{var u;typeof t.prototype=="object"&&t.prototype&&n in t.prototype||Object.defineProperty(t.prototype,n,(u=Object.getOwnPropertyDescriptor(i.prototype,n))!==null&&u!==void 0?u:Object.create(null))})})}var xa;(function(t){t.Add="Add",t.Advanced="Advanced",t.Bluetooth="Bluetooth",t.Bookmarks="Bookmarks",t.Caution="Caution",t.ColorPanel="ColorPanel",t.ColumnView="ColumnView",t.Computer="Computer",t.EnterFullScreen="EnterFullScreen",t.Everyone="Everyone",t.ExitFullScreen="ExitFullScreen",t.FlowView="FlowView",t.Folder="Folder",t.FolderBurnable="FolderBurnable",t.FolderSmart="FolderSmart",t.FollowLinkFreestanding="FollowLinkFreestanding",t.FontPanel="FontPanel",t.GoLeft="GoLeft",t.GoRight="GoRight",t.Home="Home",t.IChatTheater="IChatTheater",t.IconView="IconView",t.Info="Info",t.InvalidDataFreestanding="InvalidDataFreestanding",t.LeftFacingTriangle="LeftFacingTriangle",t.ListView="ListView",t.LockLocked="LockLocked",t.LockUnlocked="LockUnlocked",t.MenuMixedState="MenuMixedState",t.MenuOnState="MenuOnState",t.MobileMe="MobileMe",t.MultipleDocuments="MultipleDocuments",t.Network="Network",t.Path="Path",t.PreferencesGeneral="PreferencesGeneral",t.QuickLook="QuickLook",t.RefreshFreestanding="RefreshFreestanding",t.Refresh="Refresh",t.Remove="Remove",t.RevealFreestanding="RevealFreestanding",t.RightFacingTriangle="RightFacingTriangle",t.Share="Share",t.Slideshow="Slideshow",t.SmartBadge="SmartBadge",t.StatusAvailable="StatusAvailable",t.StatusNone="StatusNone",t.StatusPartiallyAvailable="StatusPartiallyAvailable",t.StatusUnavailable="StatusUnavailable",t.StopProgressFreestanding="StopProgressFreestanding",t.StopProgress="StopProgress",t.TrashEmpty="TrashEmpty",t.TrashFull="TrashFull",t.User="User",t.UserAccounts="UserAccounts",t.UserGroup="UserGroup",t.UserGuest="UserGuest"})(xa||(xa={}));const ka={find:"",replace:"",column:"FilePath",case_sensitive:!1,mark_dirty:!0},it=Aa(JSON.parse(sessionStorage.getItem("results")||"[]"));let ia;try{const t=sessionStorage.getItem("metadata");ia=t?JSON.parse(t):ka}catch(t){console.error("Error loading metadata:",t),ia=ka}const Ne=Aa(ia);it.subscribe(t=>{sessionStorage.setItem("results",JSON.stringify(t))});Ne.subscribe(t=>{sessionStorage.setItem("metadata",JSON.stringify(t))});async function mi(t={}){return typeof t=="object"&&Object.freeze(t),await l("plugin:dialog|open",{options:t})}async function Sa(t,e){var n,u,f;const i=typeof e=="string"?{title:e}:e;return await l("plugin:dialog|ask",{message:t.toString(),title:(n=i==null?void 0:i.title)==null?void 0:n.toString(),kind:i==null?void 0:i.kind,yesButtonLabel:(u=i==null?void 0:i.okLabel)==null?void 0:u.toString(),noButtonLabel:(f=i==null?void 0:i.cancelLabel)==null?void 0:f.toString()})}var Ra;(function(t){t[t.Audio=1]="Audio",t[t.Cache=2]="Cache",t[t.Config=3]="Config",t[t.Data=4]="Data",t[t.LocalData=5]="LocalData",t[t.Document=6]="Document",t[t.Download=7]="Download",t[t.Picture=8]="Picture",t[t.Public=9]="Public",t[t.Video=10]="Video",t[t.Resource=11]="Resource",t[t.Temp=12]="Temp",t[t.AppConfig=13]="AppConfig",t[t.AppData=14]="AppData",t[t.AppLocalData=15]="AppLocalData",t[t.AppCache=16]="AppCache",t[t.AppLog=17]="AppLog",t[t.Desktop=18]="Desktop",t[t.Executable=19]="Executable",t[t.Font=20]="Font",t[t.Home=21]="Home",t[t.Runtime=22]="Runtime",t[t.Template=23]="Template"})(Ra||(Ra={}));async function yi(t){return l("plugin:path|extname",{path:t})}async function xi(t,e){return l("plugin:path|basename",{path:t,ext:e})}var ki=R('<button class="cta-button inactive"><!> <span>Search</span></button>'),Si=R("<!> <span>Cancel</span>",1),Ri=R("<!> <span>Search</span>",1),zi=R('<button><div class="flex items-center gap-2"><!></div></button>'),$i=R('<span style="margin-right: 20px;"></span>'),Ci=R('<span class="clickable"> </span>'),Pi=R('<button type="button" class="small-button">Select SQLite File</button>'),Li=R('<input type="number" min="0" step="0.1" class="duration-input" style="width: 55px"> s',1),Ai=R('<div><button type="button" class="grid item"><!> <!> <span> </span></button> <!> <!></div>'),Fi=R('<button class="cta-button inactive" style="width: 125px"><!> <span>Find</span></button>'),Ti=R('<button class="cta-button" style="width: 125px"><!> <span>Find</span></button>'),Ei=R("<option> </option>"),Wi=R('<div class="page-columns svelte-1crf8xa"><div class="block" style="height: 100%"><div class="header"><h2>Search Algorithms</h2> <!></div> <div class="grid"></div></div> <div class="block" style="height: 100%; margin-top: 20px"><div class="header"><h2>Metadata Replacement</h2> <!></div> <div class="input-group2"><label for="case-sensitive"><button type="button" class="grid item"><!> <span>Case Sensitive</span></button></label></div> <div class="input-group"><label for="find-text">Find:</label> <input type="text" id="find-text" placeholder="Enter text to find" class="input-field"></div> <div class="input-group"><label for="replace-text">Replace:</label> <input type="text" id="replace-text" placeholder="Enter text to replace" class="input-field"></div> <div class="input-group"><label for="column-select">in Column:</label> <select id="column-select" class="select-field"></select></div></div></div>');function Di(t,e){_t(e,!1);const[i,n]=$a(),u=()=>bt(tt,"$algorithmsStore",i),f=()=>bt(a(g),"$metadata",i),c=V(),g=V(),M=V();ee(e,"dbSize",8);let x=ee(e,"activeTab",12),$=ee(e,"isRemove",12),J=ee(e,"selectedDb",8),G=V(!1);async function te(v){const p=await xi(v),m=await yi(v);return p.replace(m,"")}async function Q(){try{let v=await mi({multiple:!1,directory:!1,filters:[{name:"SQLite Database",extensions:["sqlite"]}]});if(Array.isArray(v)&&(v=v[0]),v){tt.update(m=>m.map(W=>W.id==="dbcompare"?(console.log("Updating dbcompare:",W,"New DB:",v),{...W,enabled:!0,db:v}):W));let p=be(tt)}}catch(v){console.error("Error selecting file:",v)}}let F=be(we);be(tt);function X(v,p){var m;return(v.id==="audiosuite"||v.id==="filename")&&!((m=p.find(W=>W.id==="basic"))!=null&&m.enabled)?"inactive":""}async function _(){$(!1);const v=be(Ne);console.log(`Finding: ${v.find}, Replacing: ${v.replace}, Case Sensitive: ${v.case_sensitive}, Column: ${v.column}`),await l("find",{find:v.find,column:v.column,caseSensitive:v.case_sensitive,pref:be(we)}).then(p=>{console.log(p)}).catch(p=>console.error(p)),x("results")}function O(){Ne.update(v=>({...v,case_sensitive:!v.case_sensitive}))}function K(v){tt.update(p=>p.map(m=>m.id===v?{...m,enabled:!m.enabled}:m))}function Z(){console.log("Toggle Search"),z(G,!a(G)),a(G)&&se()}async function se(){be(we);let v=be(tt);console.log("Starting Search"),$(!0),it.set([]);let p=v.reduce((m,W)=>(m[W.id]=W.enabled,W.id==="duration"&&(m.min_dur=W.min_dur??0),W.id==="dbcompare"&&(m.compare_db=W.db??""),m),{});p.basic||(p.audiosuite=!1),await l("search",{enabled:p,pref:be(we)}).then(m=>{console.log("Search Results:",m),it.set([m])}).catch(m=>console.error(m)),z(G,!1),x("results")}Ve(()=>it,()=>{z(c,it)}),Ve(()=>Ne,()=>{ni(z(g,Ne),"$metadata",i)}),Ve(()=>u(),()=>{var v;z(M,((v=u().find(p=>p.id==="basic"))==null?void 0:v.enabled)||!1)}),za(),ft();var T=Wi(),_e=o(T),E=o(_e),ne=b(o(E),2);{var de=v=>{var p=ki(),m=o(p);Ze(m,{size:18}),B(2),r(p),w(v,p)},ue=v=>{var p=zi(),m=o(p),W=o(m);{var Ce=oe=>{var Pe=Si(),Je=j(Pe);gi(Je,{size:18}),B(2),w(oe,Pe)},We=oe=>{var Pe=Ri(),Je=j(Pe);Ze(Je,{size:18}),B(2),w(oe,Pe)};A(W,oe=>{a(G)?oe(Ce):oe(We,!1)})}r(m),r(p),H(()=>Ye(p,1,`cta-button ${(a(G)?"cancel":"")??""}`)),C("click",p,Z),w(v,p)};A(ne,v=>{J()==null?v(de):v(ue,!1)})}r(E);var ve=b(E,2);nt(ve,5,u,rt,(v,p,m)=>{var W=Ai(),Ce=o(W),We=o(Ce);{var oe=L=>{var xe=$i();w(L,xe)};A(We,L=>{(a(p).id==="audiosuite"||a(p).id==="filename")&&L(oe)})}var Pe=b(We,2);{var Je=L=>{const xe=pt(()=>(a(p).id==="audiosuite"||a(p).id==="filename")&&!a(M)?"inactive":"checked");lt(L,{size:20,get class(){return`checkbox ${a(xe)??""}`}})},Tt=L=>{st(L,{size:20,class:"checkbox inactive"})};A(Pe,L=>{a(p).enabled?L(Je):L(Tt,!1)})}var Ie=b(Pe,2),Et=o(Ie,!0);r(Ie),r(Ce);var ut=b(Ce,2);{var Wt=L=>{var xe=ce(),Be=j(xe);{var vt=ke=>{var Se=ce(),Ot=j(Se);di(Ot,()=>te(a(p).db),null,(Vt,Ut)=>{var De=Ci(),kt=o(De,!0);r(De),H(()=>ie(kt,a(Ut))),C("click",De,Q),w(Vt,De)}),w(ke,Se)},xt=ke=>{var Se=Pi();C("click",Se,Q),w(ke,Se)};A(Be,ke=>{a(p).db!==null&&a(p).db!==void 0?ke(vt):ke(xt,!1)})}w(L,xe)};A(ut,L=>{a(p).id==="dbcompare"&&L(Wt)})}var Dt=b(ut,2);{var Mt=L=>{var xe=Li(),Be=j(xe);Fe(Be),B(),Te(Be,()=>a(p).min_dur,vt=>(a(p).min_dur=vt,wt(()=>u()),li(i,"$algorithmsStore"))),w(L,xe)};A(Dt,L=>{a(p).id==="duration"&&L(Mt)})}r(W),H(L=>{Ye(W,1,`grid item ${L??""}`,"svelte-1crf8xa"),Ye(Ie,1,La((a(p).id==="audiosuite"||a(p).id==="filename")&&!a(M)?"inactive":"")),ie(Et,a(p).name)},[()=>X(a(p),u())],pt),C("click",Ce,()=>K(a(p).id)),w(v,W)}),r(ve),r(_e);var S=b(_e,2),U=o(S),Y=b(o(U),2);{var Ee=v=>{var p=Fi(),m=o(p);Ze(m,{size:18}),B(2),r(p),w(v,p)},je=v=>{var p=Ti(),m=o(p);Ze(m,{size:18}),B(2),r(p),C("click",p,_),w(v,p)};A(Y,v=>{J()==null?v(Ee):v(je,!1)})}r(U);var k=b(U,2),y=o(k),Re=o(y),Ae=o(Re);{var dt=v=>{lt(v,{size:20,class:"checkbox checked"})},ze=v=>{st(v,{size:20,class:"checkbox"})};A(Ae,v=>{f().case_sensitive?v(dt):v(ze,!1)})}B(2),r(Re),r(y),r(k);var me=b(k,2),$e=b(o(me),2);Fe($e),r(me);var ye=b(me,2),he=b(o(ye),2);Fe(he),r(ye);var I=b(ye,2),re=b(o(I),2);H(()=>{f(),wt(()=>{})}),nt(re,5,()=>F.columns,rt,(v,p)=>{var m=Ei(),W={},Ce=o(m,!0);r(m),H(()=>{W!==(W=a(p))&&(m.value=(m.__value=a(p))==null?"":a(p)),ie(Ce,a(p))}),w(v,m)}),r(re),r(I),r(S),r(T),C("click",Re,O),Te($e,()=>f().find,v=>Zt(a(g),et(f).find=v,et(f))),Te(he,()=>f().replace,v=>Zt(a(g),et(f).replace=v,et(f))),Pt(re,()=>f().column,v=>Zt(a(g),et(f).column=v,et(f))),w(t,T),mt(),n()}var Mi=R('<button class="cta-button cancel svelte-cyleiw" style="margin-right: 8px"><!> Remove Selected</button>'),Oi=R('<!> <button class="cta-button cancel svelte-cyleiw"><!> Remove Checked</button>',1),Vi=R('<button class="cta-button cancel svelte-cyleiw"><!> <span class="svelte-cyleiw"> </span></button>'),Ui=R('<button class="small-button svelte-cyleiw">Clear all Selections</button>'),Gi=R('<option class="svelte-cyleiw"> </option>'),Hi=R('<span class="svelte-cyleiw">Filter by:</span> <select class="select-field svelte-cyleiw"></select>',1),Ki=R('<button type="button" class="grid item svelte-cyleiw" style="margin-left: 120px"><!> <span>Mark Records as Dirty</span></button>'),qi=R('<p class="ellipsis svelte-cyleiw">Loading data...</p>'),ji=R('<div><div class="grid-container svelte-cyleiw"><div class="grid-item svelte-cyleiw"><!></div> <div class="grid-item bold svelte-cyleiw"> </div> <div class="grid-item svelte-cyleiw"> </div> <div class="grid-item svelte-cyleiw"> </div></div></div>'),Ji=R('<div class="grid-header svelte-cyleiw"><div class="grid-container rheader svelte-cyleiw"><div class="grid-item header svelte-cyleiw">âœ”</div> <div class="grid-item header bold svelte-cyleiw">Filename</div> <div class="grid-item header svelte-cyleiw">Path</div> <div class="grid-item header svelte-cyleiw"><span class="svelte-cyleiw">Algorithm <!></span></div></div> <div class="resizer-container svelte-cyleiw"><div class="resizer-cell svelte-cyleiw"><div class="resizer svelte-cyleiw"></div></div> <div class="resizer-cell svelte-cyleiw"><div class="resizer svelte-cyleiw"></div></div> <div class="resizer-cell svelte-cyleiw"><div class="resizer svelte-cyleiw"></div></div> <div class="resizer-cell svelte-cyleiw"></div></div></div> <!>',1),Qi=R('<option class="svelte-cyleiw"> </option>'),Xi=R('<input class="input-field svelte-cyleiw" placeholder="_thinned" type="text" id="new_db_tag">'),Zi=R('<option class="svelte-cyleiw"> </option>'),Ni=R('<div class="block svelte-cyleiw"><div class="header svelte-cyleiw"><h2 class="svelte-cyleiw">Search Results:</h2> <span style="font-size: 18px" class="svelte-cyleiw"><!></span> <div style="margin-left: auto; display: flex; gap: 20px;" class="svelte-cyleiw"><!></div></div> <div class="bar svelte-cyleiw" style="margin-bottom: 16px; margin-top: 10px"><button type="button" class="grid item svelte-cyleiw"><!> <span class="svelte-cyleiw">Enable Selections</span></button> <!> <div class="filter-container svelte-cyleiw"><!></div></div> <div class="block inner svelte-cyleiw" style="margin-bottom: 15px"><!></div> <div class="header svelte-cyleiw" style="margin-bottom: 0px"><span class="svelte-cyleiw">Remove Records From: <select class="select-field svelte-cyleiw"></select> <!></span> <span class="svelte-cyleiw"><!> Duplicate Files On Disk: <select class="select-field svelte-cyleiw"></select></span></div></div>');function Yi(t,e){_t(e,!1);const[i,n]=$a(),u=()=>bt(we,"$preferencesStore",i),f=()=>bt(it,"$resultsStore",i),c=()=>bt(Ne,"$metadataStore",i),g=V(),M=V(),x=V(),$=V();ee(e,"removeResults",8);let J=ee(e,"isRemove",8),G=ee(e,"activeTab",12),te=ee(e,"selectedDb",12,null),Q=V(!0),F=V([]),X=V(0),_=V(new Set),O=V("Relevant"),K=V([]),Z=V(!1);function se(){z(Z,!a(Z))}function T(s,d){switch(d){case"All":return s;case"Relevant":return s.filter(h=>!h.algorithm.includes("Keep")||h.algorithm.length>1);case"Keep":return s.filter(h=>h.algorithm.includes("Keep"));case"Remove":return s.filter(h=>!h.algorithm.includes("Keep"));default:return s.filter(h=>h.algorithm.includes(d))}}function _e(s){const d=s.target;z(O,d.value)}let E=V([{minWidth:10,width:20,percentage:2},{minWidth:100,width:200,percentage:30},{minWidth:150,width:300,percentage:53},{minWidth:50,width:50,percentage:15}]),ne=V(),de=0;function ue(){if(a(ne)){const s=a(ne).clientWidth;s!==de&&(de=s,ve())}}function ve(){if(!de)return;const s=de-20;z(E,a(E).map(d=>{const h=Math.max(d.minWidth,Math.floor(s*(d.percentage/100)));return{...d,width:h}}))}function S(s,d){d.preventDefault();const h=d.clientX,D=a(E)[s].width;a(E).reduce((q,ae)=>q+ae.width,0);function P(q){const ae=q.clientX-h,Qe=Math.max(a(E)[s].minWidth,D+ae);Ue(E,a(E)[s].width=Qe);const Ht=a(E).reduce((Me,Kt)=>Me+Kt.width,0);z(E,a(E).map(Me=>({...Me,percentage:Me.width/Ht*100})))}function N(){window.removeEventListener("mousemove",P),window.removeEventListener("mouseup",N)}window.addEventListener("mousemove",P),window.addEventListener("mouseup",N)}function U(s){a(_).has(s.id)?a(_).delete(s.id):a(_).add(s.id),z(_,new Set(a(_))),console.log("toggled: ",a(_))}function Y(s){const d=s.algorithm.includes("Keep"),h=d?s.algorithm.filter(P=>P!=="Keep"):[...s.algorithm,"Keep"],D={...s,algorithm:h};z(X,a(X)+(d?-1:1)),z(F,a(F).map(P=>P===s?D:P))}function Ee(){a(_).clear(),z(_,new Set(a(_)))}async function je(){await Sa("Are you sure? This is not undoable",{title:"Confirm Replace",kind:"warning",okLabel:"Yes",cancelLabel:"Cancel"})&&a(x).find&&a(x).replace&&await l("replace_metadata",{data:a(x)}).then(()=>{console.log("Successfully replaced metadata"),Ue(x,a(x).find=""),Ue(x,a(x).replace=""),z(F,[]),G("search")}).catch(d=>{console.error("Error replacing metadata:",d)})}async function k(){try{z(Q,!0),z(X,await l("get_records_size")),z(F,await l("get_results"))}catch(s){console.error("Failed to fetch data:",s)}finally{z(Q,!1)}}Lt(()=>(k(),a(ne)&&(de=a(ne).clientWidth,ve()),window.addEventListener("resize",ue),()=>{window.removeEventListener("resize",ue)}));let y=[{id:"All",name:"All Records"},{id:"Relevant",name:"Relevant Records"},{id:"Keep",name:"Records to Keep"},{id:"Remove",name:"Records to Remove"},{id:"Basic",name:"Basic Duplicate Search"},{id:"InvalidPath",name:"Valid Filename"},{id:"SimilarFilename",name:"Similar Filename Search"},{id:"Tags",name:"Audiosuite Tags"},{id:"Waveform",name:"Waveform Comparison"},{id:"Duration",name:"Duration"},{id:"Compare",name:"Database Compare"}];async function Re(){if((a(g).erase_files==="Delete"||!a(g).safety_db)&&!await Sa("Are you sure? This is not undoable",{title:"Confirm Remove",kind:"warning",okLabel:"Yes",cancelLabel:"Cancel"}))return;const s=a(K).filter(h=>!h.algorithm.includes("Keep")).map(h=>h.id),d=a(K).filter(h=>!h.algorithm.includes("Keep")).map(h=>h.path+"/"+h.root);s.length>0&&await l("remove_records",{records:s,clone:a(g).safety_db,cloneTag:a(g).safety_db_tag,delete:a(g).erase_files,files:d}).then(async()=>{console.log("Successfully removed records with IDs:",s),z(K,a(K).filter(h=>!s.includes(h.id))),a(K).length==0&&G("search"),te(await l("get_db_name"))}).catch(h=>{console.error("Error removing records:",h)})}async function Ae(){if(a(_).size>0){const s=[];await l("remove_records",{records:a(_),clone:a(g).safety_db,cloneTag:a(g).safety_db_tag,delete:a(g).erase_files,files:s}).then(()=>{console.log("Successfully removed records with IDs:",a(_))}).catch(d=>{console.error("Error removing records:",d)})}}async function dt(s){let d=s.path+"/"+s.root;await l("open_quicklook",{filePath:d}).then(()=>{console.log("QuickLook:",d)}).catch(h=>{console.error("Error calling quicklook:",h)})}function ze(s){const d=s.target;we.update(h=>(h.erase_files=d.value,h))}function me(){Ne.update(s=>({...s,mark_dirty:!s.mark_dirty}))}Ve(()=>u(),()=>{z(g,u())}),Ve(()=>f(),()=>{z(M,f())}),Ve(()=>c(),()=>{z(x,c())}),Ve(()=>(a(F),a(O),a(_)),()=>{let s=T(a(F),a(O));s.forEach(d=>{a(_).has(d.id)&&a(_).add(d.id)}),z(K,s)}),Ve(()=>a(E),()=>{z($,a(E).map(s=>s.width))}),za(),ft();var $e=Ni(),ye=o($e),he=b(o(ye),2),I=o(he);{var re=s=>{var d=ra();H(()=>ie(d,`${a(X)??""} of ${a(F).length??""} Records marked for Removal`)),w(s,d)},v=s=>{var d=ra();H(()=>ie(d,`${a(F).length??""} Records found`)),w(s,d)};A(I,s=>{J()?s(re):s(v,!1)})}r(he);var p=b(he,2),m=o(p);{var W=s=>{var d=Oi(),h=j(d);{var D=q=>{var ae=Mi(),Qe=o(ae);pa(Qe,{size:"18"}),B(),r(ae),C("click",ae,Ae),w(q,ae)};A(h,q=>{a(Z)&&q(D)})}var P=b(h,2),N=o(P);pa(N,{size:"18"}),B(),r(P),C("click",P,Re),w(s,d)},Ce=s=>{var d=Vi(),h=o(d);hi(h,{size:"18"});var D=b(h,2),P=o(D);r(D),r(d),H(()=>{var N;return ie(P,`Replace '${a(x).find??""}' with '${((N=a(x))==null?void 0:N.replace)||""}'`)}),C("click",d,je),w(s,d)};A(m,s=>{J()?s(W):s(Ce,!1)})}r(p),r(ye);var We=b(ye,2),oe=o(We),Pe=o(oe);{var Je=s=>{lt(s,{size:20,class:"checkbox checked"})},Tt=s=>{st(s,{size:20,class:"checkbox"})};A(Pe,s=>{a(Z)?s(Je):s(Tt,!1)})}B(2),r(oe);var Ie=b(oe,2);{var Et=s=>{var d=Ui();C("click",d,Ee),w(s,d)};A(Ie,s=>{a(Z)&&s(Et)})}var ut=b(Ie,2),Wt=o(ut);{var Dt=s=>{var d=Hi(),h=b(j(d),2);H(()=>{a(O),wt(()=>{})}),nt(h,5,()=>y,rt,(D,P)=>{var N=Gi(),q={},ae=o(N,!0);r(N),H(()=>{q!==(q=a(P).id)&&(N.value=(N.__value=a(P).id)==null?"":a(P).id),ie(ae,a(P).name)}),w(D,N)}),r(h),Pt(h,()=>a(O),D=>z(O,D)),C("change",h,_e),w(s,d)},Mt=s=>{var d=Ki(),h=o(d);{var D=q=>{const ae=pt(()=>a(x).column=="FilePath"||a(x).column=="Filename"||a(x).column=="Pathname"?"inactive":"");lt(q,{size:20,get class(){return`checkbox checked ${a(ae)??""}`}})},P=q=>{st(q,{size:20,class:"checkbox"})};A(h,q=>{c().mark_dirty?q(D):q(P,!1)})}var N=b(h,2);r(d),H(()=>Ye(N,1,La(a(x).column=="FilePath"||a(x).column=="Filename"||a(x).column=="Pathname"?"inactive":""),"svelte-cyleiw")),C("click",d,me),w(s,d)};A(Wt,s=>{J()?s(Dt):s(Mt,!1)})}r(ut),r(We);var L=b(We,2),xe=o(L);{var Be=s=>{var d=qi();w(s,d)},vt=s=>{var d=Ji(),h=j(d),D=o(h),P=b(o(D),6),N=o(P),q=b(o(N));bi(q,{size:20}),r(N),r(P),r(D);var ae=b(D,2),Qe=o(ae),Ht=o(Qe);r(Qe);var Me=b(Qe,2),Kt=o(Me);r(Me);var sa=b(Me,2),Ma=o(sa);r(sa),B(2),r(ae),r(h);var Oa=b(h,2);oi(Oa,{get items(){return a(K)},children:ci,$$slots:{default:(Xe,Va)=>{const pe=pt(()=>Va.item);var St=ji(),qt=o(St),Rt=o(qt),Ua=o(Rt);{var Ga=Le=>{lt(Le,{size:14})},Ha=Le=>{st(Le,{size:14})};A(Ua,Le=>{a(pe).algorithm.includes("Keep")?Le(Ha,!1):Le(Ga)})}r(Rt);var zt=b(Rt,2),Ka=o(zt,!0);r(zt);var $t=b(zt,2),qa=o($t,!0);r($t);var jt=b($t,2),ja=o(jt,!0);r(jt),r(qt),r(St),H((Le,Ja,Qa)=>{Ye(St,1,`list-item ${Le??""}`,"svelte-cyleiw"),ht(qt,"style",`${Ja??""};    grid-template-columns: ${a($)[0]??""}px ${a($)[1]??""}px ${a($)[2]??""}px ${a($)[3]??""}px;`),ie(Ka,a(pe).root),ie(qa,a(pe).path),ie(ja,Qa)},[()=>a(pe).algorithm.includes("Keep")?"unselected-item":"checked-item",()=>a(_).has(a(pe).id)&&a(Z)?"background-color: var(--accent-color)":"",()=>a(pe).algorithm.filter(Le=>Le!=="Keep").join(", ")],pt),C("click",Rt,()=>Y(a(pe))),C("click",zt,()=>a(Z)?U(a(pe)):Y(a(pe))),C("click",$t,()=>a(Z)?U(a(pe)):Y(a(pe))),C("click",jt,()=>dt(a(pe))),w(Xe,St)}}}),H(()=>{ht(D,"style",`grid-template-columns: ${a($)[0]??""}px ${a($)[1]??""}px ${a($)[2]??""}px ${a($)[3]??""}px;`),ht(ae,"style",`grid-template-columns: ${a($)[0]??""}px ${a($)[1]??""}px ${a($)[2]??""}px ${a($)[3]??""}px;`)}),C("mousedown",Ht,Xe=>S(0,Xe)),C("mousedown",Kt,Xe=>S(1,Xe)),C("mousedown",Ma,Xe=>S(2,Xe)),w(s,d)};A(xe,s=>{a(Q)?s(Be):s(vt,!1)})}r(L),si(L,s=>z(ne,s),()=>a(ne));var xt=b(L,2),ke=o(xt),Se=b(o(ke));H(()=>{a(g),wt(()=>{})}),nt(Se,4,()=>[{bool:!0,text:"Database Copy with tag:"},{bool:!1,text:"Current Database"}],rt,(s,d)=>{var h=Qi(),D={},P=o(h,!0);r(h),H(()=>{D!==(D=d.bool)&&(h.value=(h.__value=d.bool)==null?"":d.bool),ie(P,d.text)}),w(s,h)}),r(Se);var Ot=b(Se,2);{var Vt=s=>{var d=Xi();Fe(d),Te(d,()=>a(g).safety_db_tag,h=>Ue(g,a(g).safety_db_tag=h)),C("change",d,()=>we.set(a(g))),w(s,d)},Ut=s=>{ba(s,{size:"20",class:"blinking"})};A(Ot,s=>{a(g).safety_db?s(Vt):s(Ut,!1)})}r(ke);var De=b(ke,2),kt=o(De);{var Da=s=>{ba(s,{size:"20",class:"blinking"})};A(kt,s=>{a(g).erase_files==="Delete"&&s(Da)})}var Gt=b(kt,2);nt(Gt,4,()=>[{id:"Keep",text:"Keep"},{id:"Trash",text:"Move To Trash"},{id:"Delete",text:"Permanently Delete"}],rt,(s,d)=>{var h=Zi(),D={},P=o(h,!0);r(h),H(()=>{D!==(D=d.id)&&(h.value=(h.__value=d.id)==null?"":d.id),ie(P,d.text)}),w(s,h)}),r(Gt),r(De),r(xt),r($e),H(()=>{ht(ke,"style",a(g).safety_db?"":"color: var(--warning-hover); font-style: bold;"),ht(De,"style",a(g).erase_files!="Keep"?"color: var(--warning-hover); font-style: bold;":"")}),C("click",oe,se),C("resize",L,ue),Pt(Se,()=>a(g).safety_db,s=>Ue(g,a(g).safety_db=s)),C("change",Se,()=>we.set(a(g))),C("change",Gt,ze),w(t,$e),mt(),n()}var Ii=R('<button class="cta-button inactive"><!> <span>Find Records</span></button>'),Bi=R('<button class="cta-button"><!> <span>Find Records</span></button>'),en=R("<option> </option>"),tn=R('<div class="block"><div class="header"><h2>Metadata Replacement</h2> <!></div> <div class="input-group2"><label for="case-sensitive"><button type="button" class="grid item"><!> <span>Case Sensitive</span></button></label></div> <div class="input-group"><label for="find-text">Find:</label> <input type="text" id="find-text" placeholder="Enter text to find" class="input-field"></div> <div class="input-group"><label for="replace-text">Replace:</label> <input type="text" id="replace-text" placeholder="Enter text to replace" class="input-field"></div> <div class="input-group"><label for="column-select">in Column:</label> <select id="column-select" class="select-field"></select></div></div>');function an(t,e){_t(e,!1);let i=ee(e,"activeTab",12),n=ee(e,"isRemove",12),u=ee(e,"selectedDb",8),f=be(we),c=V(""),g=V(""),M=V(!1),x=V("FilePath");async function $(){n(!1),console.log(`Finding: ${a(c)}, Replacing: ${a(g)}, Case Sensitive: ${a(M)}, Column: ${a(x)}`),await l("find",{find:a(c),column:a(x),caseSensitive:a(M)}).then(S=>{console.log(S)}).catch(S=>console.error(S)),i("results")}function J(){z(M,!a(M))}ft();var G=tn(),te=o(G),Q=b(o(te),2);{var F=S=>{var U=Ii(),Y=o(U);Ze(Y,{size:18}),B(2),r(U),w(S,U)},X=S=>{var U=Bi(),Y=o(U);Ze(Y,{size:18}),B(2),r(U),C("click",U,$),w(S,U)};A(Q,S=>{u()==null?S(F):S(X,!1)})}r(te);var _=b(te,2),O=o(_),K=o(O),Z=o(K);{var se=S=>{lt(S,{size:20,class:"checkbox checked"})},T=S=>{st(S,{size:20,class:"checkbox"})};A(Z,S=>{a(M)?S(se):S(T,!1)})}B(2),r(K),r(O),r(_);var _e=b(_,2),E=b(o(_e),2);Fe(E),r(_e);var ne=b(_e,2),de=b(o(ne),2);Fe(de),r(ne);var ue=b(ne,2),ve=b(o(ue),2);H(()=>{a(x),wt(()=>{})}),nt(ve,5,()=>f.columns,rt,(S,U)=>{var Y=en(),Ee={},je=o(Y,!0);r(Y),H(()=>{Ee!==(Ee=a(U))&&(Y.value=(Y.__value=a(U))==null?"":a(U)),ie(je,a(U))}),w(S,Y)}),r(ve),r(ue),r(G),C("click",K,J),Te(E,()=>a(c),S=>z(c,S)),Te(de,()=>a(g),S=>z(g,S)),Pt(ve,()=>a(x),S=>z(x,S)),w(t,G),mt()}var nn=R('<div class="block"><div class="header"><h2>Search Results: <span class="basic-text" style="display: inline-flex; margin: 0;"> </span></h2> <button class="cta-button cancel">Register</button></div> <div class="input-group2"><label for="case-sensitive">Registration Required to View Results</label></div> <div class="input-group"><label for="name">Name:</label> <input type="text" id="find-text" placeholder="Enter Registration Name" class="input-field"></div> <div class="input-group"><label for="email">Email:</label> <input type="text" id="find-text" placeholder="Enter Registration Email" class="input-field"></div> <div class="input-group"><label for="Reg">License:</label> <input type="text" id="replace-text" placeholder="Enter License number" class="input-field"></div> </div>');function ln(t,e){_t(e,!1);let i=ee(e,"isRegistered",12),n=V(be(ta)),u=V(0),f=V("temp");async function c(){try{z(f,await l("get_reg",{data:a(n)}))}catch(T){console.error("Failed to fetch data:",T)}}async function g(){ta.set(a(n)),l("check_reg",{data:a(n)}).then(T=>{i(T),console.log("Registration:",T)}).catch(T=>console.error(T))}async function M(){try{z(u,await l("get_records_size"))}catch(T){console.error("Failed to fetch data:",T)}}Lt(M),Lt(c),ft();var x=nn(),$=o(x),J=o($),G=b(o(J)),te=o(G);r(G),r(J);var Q=b(J,2);r($);var F=b($,4),X=b(o(F),2);Fe(X),r(F);var _=b(F,2),O=b(o(_),2);Fe(O),r(_);var K=b(_,2),Z=b(o(K),2);Fe(Z),r(K);var se=b(K);r(x),H(()=>{ie(te,`${a(u)??""} duplicates found`),ie(se,` ${a(f)??""}`)}),C("click",Q,g),Te(X,()=>a(n).name,T=>Ue(n,a(n).name=T)),Te(O,()=>a(n).email,T=>Ue(n,a(n).email=T)),Te(Z,()=>a(n).license,T=>Ue(n,a(n).license=T)),w(t,x),mt()}var sn=R('<div class="app-container"><div class="top-bar"><div class="top-bar-left"><button class="nav-link"><!> <span style="font-size: 24px;"> </span></button></div> <div class="top-bar-right"><button><div class="flex items-center gap-2"><!> <span>Search</span></div></button> <button><div class="flex items-center gap-2"><!> <span>Results</span></div></button> <button class="nav-link"><div class="flex items-center gap-2"><!> Options</div></button></div></div> <main class="content"><!></main></div>');function pn(t,e){_t(e,!1);let i=ee(e,"dbSize",12,0),n=ee(e,"activeTab",12,"search"),u=ee(e,"isRemove",12,!0),f=ee(e,"isRegistered",12,!1),c=ee(e,"selectedDb",12,null);be(we),we.subscribe(k=>{if(k!=null&&k.colors){const{colors:y}=k;document.documentElement.style.setProperty("--primary-bg",y.primaryBg??"#1a1a1a"),document.documentElement.style.setProperty("--secondary-bg",y.secondaryBg??"#2a2a2a"),document.documentElement.style.setProperty("--text-color",y.textColor??"#ffffff"),document.documentElement.style.setProperty("--topbar-color",y.topbarColor??"#333333"),document.documentElement.style.setProperty("--accent-color",y.accentColor??"#007acc"),document.documentElement.style.setProperty("--hover-color",y.hoverColor??"#2b2b2b"),document.documentElement.style.setProperty("--warning-color",y.warningColor??"#ff4444"),document.documentElement.style.setProperty("--warning-hover",y.warningHover??"#cc0000"),document.documentElement.style.setProperty("--inactive-color",y.inactiveColor??"#666666")}});async function g(){try{const k=await l("get_columns");we.update(y=>({...y,columns:k}))}catch(k){console.error("Failed to fetch columns:",k)}}async function M(){const k=await yt.getByLabel("preferences");if(k)await k.isVisible()?await k.hide():await k.show();else{const y=`${window.location.origin}/preferences`;console.log("Creating Pref Window!");const Re=new ct("preferences",{title:"Preferences",width:1050,height:800,visible:!0,url:y,dragDropEnabled:!1,devtools:!0});await Ft("preferences-log",Ae=>{console.log("Preferences Window:",Ae.payload)}),Re.once("tauri://created",function(){console.log("Preferences window created!")}),Re.once("tauri://error",function(Ae){console.error("Error creating preferences window:",Ae)})}}async function x(){console.log("Checking Registration");let k=be(ta);return l("check_reg",{data:k}).then(y=>{f(y),console.log("Registration:",y)}).catch(y=>console.error(y)),f()}async function $(){console.log("getting size"),l("get_db_size").then(k=>{i(k),console.log("get size:",k)}).catch(k=>console.error(k))}async function J(k=!1){await l("open_db",{isCompare:k}).then(y=>{c(y),console.log("db path: ",y),n()=="search"||n()=="metadata"||n("search")}).catch(y=>console.error(y)),await $(),await g()}function G(){console.log("Remove selected results")}Lt(x),ft();var te=sn(),Q=o(te),F=o(Q),X=o(F),_=o(X);ui(_,{size:18});var O=b(_,2),K=o(O,!0);r(O),r(X),r(F);var Z=b(F,2),se=o(Z),T=o(se),_e=o(T);Ze(_e,{size:18}),B(2),r(T),r(se);var E=b(se,2),ne=o(E),de=o(ne);vi(de,{size:18}),B(2),r(ne),r(E);var ue=b(E,2),ve=o(ue),S=o(ve);pi(S,{size:18}),B(),r(ve),r(ue),r(Z),r(Q);var U=b(Q,2),Y=o(U);{var Ee=k=>{Di(k,{get dbSize(){return i()},get selectedDb(){return c()},set selectedDb(y){c(y)},get activeTab(){return n()},set activeTab(y){n(y)},get isRemove(){return u()},set isRemove(y){u(y)},$$legacy:!0})},je=k=>{var y=ce(),Re=j(y);{var Ae=ze=>{var me=ce(),$e=j(me);{var ye=I=>{Yi(I,{removeResults:G,get isRemove(){return u()},set isRemove(re){u(re)},get activeTab(){return n()},set activeTab(re){n(re)},get selectedDb(){return c()},set selectedDb(re){c(re)},$$legacy:!0})},he=I=>{ln(I,{get isRegistered(){return f()},set isRegistered(re){f(re)},$$legacy:!0})};A($e,I=>{f()?I(ye):I(he,!1)})}w(ze,me)},dt=ze=>{var me=ce(),$e=j(me);{var ye=he=>{an(he,{get activeTab(){return n()},set activeTab(I){n(I)},get isRemove(){return u()},set isRemove(I){u(I)},get selectedDb(){return c()},set selectedDb(I){c(I)},$$legacy:!0})};A($e,he=>{n()==="metadata"&&he(ye)},!0)}w(ze,me)};A(Re,ze=>{n()==="results"?ze(Ae):ze(dt,!1)},!0)}w(k,y)};A(Y,k=>{n()==="search"?k(Ee):k(je,!1)})}r(U),r(te),H(()=>{ie(K,c()?c():"Select Database"),Ye(se,1,`nav-link ${(n()==="search"?"active":"")??""}`),Ye(E,1,`nav-link ${(n()==="results"?"active":"")??""}`)}),C("click",X,()=>J(!1)),C("click",se,()=>n("search")),C("click",E,()=>n("results")),C("click",ue,M),w(t,te),mt()}export{pn as component};
