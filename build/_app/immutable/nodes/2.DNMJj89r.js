import{c as ce,a as w,t as z,d as oa}from"../chunks/mBltkime.js";import{i as Rt}from"../chunks/D5lfpR5M.js";import{l as Qt,F as Na,aO as Xa,i as Za,aP as Ya,U as ca,aE as Nt,J as da,a1 as ua,_ as Ia,ag as va,af as ha,aQ as pa,c as Ba,W as ei,j as ti,X as Xt,as as ai,m as ii,o as j,p as zt,L as k,aw as F,av as He,ax as $a,s as o,w as p,v as r,g as a,ay as te,t as K,aA as kt,b as nt,q as $t,a4 as mt,az as Ke}from"../chunks/4B8pOMzx.js";import{s as B,e as P}from"../chunks/saORRO85.js";import{l as Te,s as Ee,p as ae,f as si,c as yt,i as T,g as Zt,d as Ca,h as ni,b as li}from"../chunks/DGF-fiXx.js";import{I as We,s as Me,l as ye,R as ri,m as n,n as pt,o as na,j as Pa,q as La,T as le,p as me,t as lt,r as Fe,e as ct,i as dt,b as Ae,f as Mt,a as et,g as Ye,u as Fa,S as ut,d as vt,O as ba,V as oi,v as aa}from"../chunks/CAW8Yf8D.js";import{w as Aa,g as _e,o as St,a as ci,i as di}from"../chunks/DuSSP3kn.js";const Yt=0,Wt=1,It=2;function ui(t,e,i,s,h){Qt&&Na();var f=t,d=Xa(),g=Ba,M=ca,S,C,Q,G=(d?da:ua)(void 0),ie=(d?da:ua)(void 0),N=!1;function E(y,D){N=!0,D&&(va(X),ha(X),pa(g));try{y===Wt&&s&&(C?ei(C):C=ti(()=>s(f,G))),y!==Yt&&S&&Xt(S,()=>S=null),y!==Wt&&C&&Xt(C,()=>C=null),y!==It&&Q&&Xt(Q,()=>Q=null)}finally{D&&(pa(null),ha(null),va(null),ai())}}var X=Za(()=>{if(M!==(M=e())){if(Ya(M)){var y=M;N=!1,y.then(D=>{y===M&&(Nt(G,D),E(Wt,!0))},D=>{if(y===M)throw Nt(ie,D),E(It,!0),ie.v}),Qt||Ia(()=>{N||E(Yt,!0)})}else Nt(G,M),E(Wt,!1);return()=>M=ca}});Qt&&(f=ii)}function vi(t,e){const i=Te(e,["children","$$slots","$$events","$$legacy"]);We(t,Ee({name:"database"},()=>i,{iconNode:[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5"}],["path",{d:"M3 12A9 3 0 0 0 21 12"}]],children:(h,f)=>{var d=ce(),g=j(d);Me(g,e,"default",{},null),w(h,d)},$$slots:{default:!0}}))}function hi(t,e){const i=Te(e,["children","$$slots","$$events","$$legacy"]);We(t,Ee({name:"files"},()=>i,{iconNode:[["path",{d:"M20 7h-3a2 2 0 0 1-2-2V2"}],["path",{d:"M9 18a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h7l4 4v10a2 2 0 0 1-2 2Z"}],["path",{d:"M3 7.6v12.8A1.6 1.6 0 0 0 4.6 22h9.8"}]],children:(h,f)=>{var d=ce(),g=j(d);Me(g,e,"default",{},null),w(h,d)},$$slots:{default:!0}}))}function pi(t,e){const i=Te(e,["children","$$slots","$$events","$$legacy"]);We(t,Ee({name:"loader"},()=>i,{iconNode:[["path",{d:"M12 2v4"}],["path",{d:"m16.2 7.8 2.9-2.9"}],["path",{d:"M18 12h4"}],["path",{d:"m16.2 16.2 2.9 2.9"}],["path",{d:"M12 18v4"}],["path",{d:"m4.9 19.1 2.9-2.9"}],["path",{d:"M2 12h4"}],["path",{d:"m4.9 4.9 2.9 2.9"}]],children:(h,f)=>{var d=ce(),g=j(d);Me(g,e,"default",{},null),w(h,d)},$$slots:{default:!0}}))}function bi(t,e){const i=Te(e,["children","$$slots","$$events","$$legacy"]);We(t,Ee({name:"notebook-pen"},()=>i,{iconNode:[["path",{d:"M13.4 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-7.4"}],["path",{d:"M2 6h4"}],["path",{d:"M2 10h4"}],["path",{d:"M2 14h4"}],["path",{d:"M2 18h4"}],["path",{d:"M21.378 5.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z"}]],children:(h,f)=>{var d=ce(),g=j(d);Me(g,e,"default",{},null),w(h,d)},$$slots:{default:!0}}))}function Ie(t,e){const i=Te(e,["children","$$slots","$$events","$$legacy"]);We(t,Ee({name:"search"},()=>i,{iconNode:[["circle",{cx:"11",cy:"11",r:"8"}],["path",{d:"m21 21-4.3-4.3"}]],children:(h,f)=>{var d=ce(),g=j(d);Me(g,e,"default",{},null),w(h,d)},$$slots:{default:!0}}))}function gi(t,e){const i=Te(e,["children","$$slots","$$events","$$legacy"]);We(t,Ee({name:"settings-2"},()=>i,{iconNode:[["path",{d:"M20 7h-9"}],["path",{d:"M14 17H5"}],["circle",{cx:"17",cy:"17",r:"3"}],["circle",{cx:"7",cy:"7",r:"3"}]],children:(h,f)=>{var d=ce(),g=j(d);Me(g,e,"default",{},null),w(h,d)},$$slots:{default:!0}}))}function ga(t,e){const i=Te(e,["children","$$slots","$$events","$$legacy"]);We(t,Ee({name:"triangle-alert"},()=>i,{iconNode:[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"}],["path",{d:"M12 9v4"}],["path",{d:"M12 17h.01"}]],children:(h,f)=>{var d=ce(),g=j(d);Me(g,e,"default",{},null),w(h,d)},$$slots:{default:!0}}))}function wi(t,e){const i=Te(e,["children","$$slots","$$events","$$legacy"]);We(t,Ee({name:"volume-2"},()=>i,{iconNode:[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z"}],["path",{d:"M16 9a5 5 0 0 1 0 6"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728"}]],children:(h,f)=>{var d=ce(),g=j(d);Me(g,e,"default",{},null),w(h,d)},$$slots:{default:!0}}))}function _i(t,e){const i=Te(e,["children","$$slots","$$events","$$legacy"]);We(t,Ee({name:"x"},()=>i,{iconNode:[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]],children:(h,f)=>{var d=ce(),g=j(d);Me(g,e,"default",{},null),w(h,d)},$$slots:{default:!0}}))}class Ta{constructor(...e){this.type="Logical",e.length===1?"Logical"in e[0]?(this.width=e[0].Logical.width,this.height=e[0].Logical.height):(this.width=e[0].width,this.height=e[0].height):(this.width=e[0],this.height=e[1])}toPhysical(e){return new ht(this.width*e,this.height*e)}[ye](){return{width:this.width,height:this.height}}toJSON(){return this[ye]()}}class ht{constructor(...e){this.type="Physical",e.length===1?"Physical"in e[0]?(this.width=e[0].Physical.width,this.height=e[0].Physical.height):(this.width=e[0].width,this.height=e[0].height):(this.width=e[0],this.height=e[1])}toLogical(e){return new Ta(this.width/e,this.height/e)}[ye](){return{width:this.width,height:this.height}}toJSON(){return this[ye]()}}class Ge{constructor(e){this.size=e}toLogical(e){return this.size instanceof Ta?this.size:this.size.toLogical(e)}toPhysical(e){return this.size instanceof ht?this.size:this.size.toPhysical(e)}[ye](){return{[`${this.size.type}`]:{width:this.size.width,height:this.size.height}}}toJSON(){return this[ye]()}}class Ea{constructor(...e){this.type="Logical",e.length===1?"Logical"in e[0]?(this.x=e[0].Logical.x,this.y=e[0].Logical.y):(this.x=e[0].x,this.y=e[0].y):(this.x=e[0],this.y=e[1])}toPhysical(e){return new fe(this.x*e,this.y*e)}[ye](){return{x:this.x,y:this.y}}toJSON(){return this[ye]()}}class fe{constructor(...e){this.type="Physical",e.length===1?"Physical"in e[0]?(this.x=e[0].Physical.x,this.y=e[0].Physical.y):(this.x=e[0].x,this.y=e[0].y):(this.x=e[0],this.y=e[1])}toLogical(e){return new Ea(this.x/e,this.y/e)}[ye](){return{x:this.x,y:this.y}}toJSON(){return this[ye]()}}class rt{constructor(e){this.position=e}toLogical(e){return this.position instanceof Ea?this.position:this.position.toLogical(e)}toPhysical(e){return this.position instanceof fe?this.position:this.position.toPhysical(e)}[ye](){return{[`${this.position.type}`]:{x:this.position.x,y:this.position.y}}}toJSON(){return this[ye]()}}class xt extends ri{constructor(e){super(e)}static async new(e,i,s){return n("plugin:image|new",{rgba:Dt(e),width:i,height:s}).then(h=>new xt(h))}static async fromBytes(e){return n("plugin:image|from_bytes",{bytes:Dt(e)}).then(i=>new xt(i))}static async fromPath(e){return n("plugin:image|from_path",{path:e}).then(i=>new xt(i))}async rgba(){return n("plugin:image|rgba",{rid:this.rid}).then(e=>new Uint8Array(e))}async size(){return n("plugin:image|size",{rid:this.rid})}}function Dt(t){return t==null?null:typeof t=="string"?t:t instanceof xt?t.rid:t}var ia;(function(t){t[t.Critical=1]="Critical",t[t.Informational=2]="Informational"})(ia||(ia={}));class fi{constructor(e){this._preventDefault=!1,this.event=e.event,this.id=e.id}preventDefault(){this._preventDefault=!0}isPreventDefault(){return this._preventDefault}}var wa;(function(t){t.None="none",t.Normal="normal",t.Indeterminate="indeterminate",t.Paused="paused",t.Error="error"})(wa||(wa={}));function Wa(){return new Ct(window.__TAURI_INTERNALS__.metadata.currentWindow.label,{skip:!0})}async function Bt(){return n("plugin:window|get_all_windows").then(t=>t.map(e=>new Ct(e,{skip:!0})))}const ea=["tauri://created","tauri://error"];class Ct{constructor(e,i={}){var s;this.label=e,this.listeners=Object.create(null),i!=null&&i.skip||n("plugin:window|create",{options:{...i,parent:typeof i.parent=="string"?i.parent:(s=i.parent)===null||s===void 0?void 0:s.label,label:e}}).then(async()=>this.emit("tauri://created")).catch(async h=>this.emit("tauri://error",h))}static async getByLabel(e){var i;return(i=(await Bt()).find(s=>s.label===e))!==null&&i!==void 0?i:null}static getCurrent(){return Wa()}static async getAll(){return Bt()}static async getFocusedWindow(){for(const e of await Bt())if(await e.isFocused())return e;return null}async listen(e,i){return this._handleTauriEvent(e,i)?()=>{const s=this.listeners[e];s.splice(s.indexOf(i),1)}:pt(e,i,{target:{kind:"Window",label:this.label}})}async once(e,i){return this._handleTauriEvent(e,i)?()=>{const s=this.listeners[e];s.splice(s.indexOf(i),1)}:na(e,i,{target:{kind:"Window",label:this.label}})}async emit(e,i){if(ea.includes(e)){for(const s of this.listeners[e]||[])s({event:e,id:-1,payload:i});return}return Pa(e,i)}async emitTo(e,i,s){if(ea.includes(i)){for(const h of this.listeners[i]||[])h({event:i,id:-1,payload:s});return}return La(e,i,s)}_handleTauriEvent(e,i){return ea.includes(e)?(e in this.listeners?this.listeners[e].push(i):this.listeners[e]=[i],!0):!1}async scaleFactor(){return n("plugin:window|scale_factor",{label:this.label})}async innerPosition(){return n("plugin:window|inner_position",{label:this.label}).then(e=>new fe(e))}async outerPosition(){return n("plugin:window|outer_position",{label:this.label}).then(e=>new fe(e))}async innerSize(){return n("plugin:window|inner_size",{label:this.label}).then(e=>new ht(e))}async outerSize(){return n("plugin:window|outer_size",{label:this.label}).then(e=>new ht(e))}async isFullscreen(){return n("plugin:window|is_fullscreen",{label:this.label})}async isMinimized(){return n("plugin:window|is_minimized",{label:this.label})}async isMaximized(){return n("plugin:window|is_maximized",{label:this.label})}async isFocused(){return n("plugin:window|is_focused",{label:this.label})}async isDecorated(){return n("plugin:window|is_decorated",{label:this.label})}async isResizable(){return n("plugin:window|is_resizable",{label:this.label})}async isMaximizable(){return n("plugin:window|is_maximizable",{label:this.label})}async isMinimizable(){return n("plugin:window|is_minimizable",{label:this.label})}async isClosable(){return n("plugin:window|is_closable",{label:this.label})}async isVisible(){return n("plugin:window|is_visible",{label:this.label})}async title(){return n("plugin:window|title",{label:this.label})}async theme(){return n("plugin:window|theme",{label:this.label})}async center(){return n("plugin:window|center",{label:this.label})}async requestUserAttention(e){let i=null;return e&&(e===ia.Critical?i={type:"Critical"}:i={type:"Informational"}),n("plugin:window|request_user_attention",{label:this.label,value:i})}async setResizable(e){return n("plugin:window|set_resizable",{label:this.label,value:e})}async setEnabled(e){return n("plugin:window|set_enabled",{label:this.label,value:e})}async isEnabled(){return n("plugin:window|is_enabled",{label:this.label})}async setMaximizable(e){return n("plugin:window|set_maximizable",{label:this.label,value:e})}async setMinimizable(e){return n("plugin:window|set_minimizable",{label:this.label,value:e})}async setClosable(e){return n("plugin:window|set_closable",{label:this.label,value:e})}async setTitle(e){return n("plugin:window|set_title",{label:this.label,value:e})}async maximize(){return n("plugin:window|maximize",{label:this.label})}async unmaximize(){return n("plugin:window|unmaximize",{label:this.label})}async toggleMaximize(){return n("plugin:window|toggle_maximize",{label:this.label})}async minimize(){return n("plugin:window|minimize",{label:this.label})}async unminimize(){return n("plugin:window|unminimize",{label:this.label})}async show(){return n("plugin:window|show",{label:this.label})}async hide(){return n("plugin:window|hide",{label:this.label})}async close(){return n("plugin:window|close",{label:this.label})}async destroy(){return n("plugin:window|destroy",{label:this.label})}async setDecorations(e){return n("plugin:window|set_decorations",{label:this.label,value:e})}async setShadow(e){return n("plugin:window|set_shadow",{label:this.label,value:e})}async setEffects(e){return n("plugin:window|set_effects",{label:this.label,value:e})}async clearEffects(){return n("plugin:window|set_effects",{label:this.label,value:null})}async setAlwaysOnTop(e){return n("plugin:window|set_always_on_top",{label:this.label,value:e})}async setAlwaysOnBottom(e){return n("plugin:window|set_always_on_bottom",{label:this.label,value:e})}async setContentProtected(e){return n("plugin:window|set_content_protected",{label:this.label,value:e})}async setSize(e){return n("plugin:window|set_size",{label:this.label,value:e instanceof Ge?e:new Ge(e)})}async setMinSize(e){return n("plugin:window|set_min_size",{label:this.label,value:e instanceof Ge?e:e?new Ge(e):null})}async setMaxSize(e){return n("plugin:window|set_max_size",{label:this.label,value:e instanceof Ge?e:e?new Ge(e):null})}async setSizeConstraints(e){function i(s){return s?{Logical:s}:null}return n("plugin:window|set_size_constraints",{label:this.label,value:{minWidth:i(e==null?void 0:e.minWidth),minHeight:i(e==null?void 0:e.minHeight),maxWidth:i(e==null?void 0:e.maxWidth),maxHeight:i(e==null?void 0:e.maxHeight)}})}async setPosition(e){return n("plugin:window|set_position",{label:this.label,value:e instanceof rt?e:new rt(e)})}async setFullscreen(e){return n("plugin:window|set_fullscreen",{label:this.label,value:e})}async setFocus(){return n("plugin:window|set_focus",{label:this.label})}async setIcon(e){return n("plugin:window|set_icon",{label:this.label,value:Dt(e)})}async setSkipTaskbar(e){return n("plugin:window|set_skip_taskbar",{label:this.label,value:e})}async setCursorGrab(e){return n("plugin:window|set_cursor_grab",{label:this.label,value:e})}async setCursorVisible(e){return n("plugin:window|set_cursor_visible",{label:this.label,value:e})}async setCursorIcon(e){return n("plugin:window|set_cursor_icon",{label:this.label,value:e})}async setBackgroundColor(e){return n("plugin:window|set_background_color",{color:e})}async setCursorPosition(e){return n("plugin:window|set_cursor_position",{label:this.label,value:e instanceof rt?e:new rt(e)})}async setIgnoreCursorEvents(e){return n("plugin:window|set_ignore_cursor_events",{label:this.label,value:e})}async startDragging(){return n("plugin:window|start_dragging",{label:this.label})}async startResizeDragging(e){return n("plugin:window|start_resize_dragging",{label:this.label,value:e})}async setBadgeCount(e){return n("plugin:window|set_badge_count",{label:this.label,value:e})}async setBadgeLabel(e){return n("plugin:window|set_badge_label",{label:this.label,value:e})}async setOverlayIcon(e){return n("plugin:window|set_overlay_icon",{label:this.label,value:e?Dt(e):void 0})}async setProgressBar(e){return n("plugin:window|set_progress_bar",{label:this.label,value:e})}async setVisibleOnAllWorkspaces(e){return n("plugin:window|set_visible_on_all_workspaces",{label:this.label,value:e})}async setTitleBarStyle(e){return n("plugin:window|set_title_bar_style",{label:this.label,value:e})}async setTheme(e){return n("plugin:window|set_theme",{label:this.label,value:e})}async onResized(e){return this.listen(le.WINDOW_RESIZED,i=>{i.payload=new ht(i.payload),e(i)})}async onMoved(e){return this.listen(le.WINDOW_MOVED,i=>{i.payload=new fe(i.payload),e(i)})}async onCloseRequested(e){return this.listen(le.WINDOW_CLOSE_REQUESTED,async i=>{const s=new fi(i);await e(s),s.isPreventDefault()||await this.destroy()})}async onDragDropEvent(e){const i=await this.listen(le.DRAG_ENTER,d=>{e({...d,payload:{type:"enter",paths:d.payload.paths,position:new fe(d.payload.position)}})}),s=await this.listen(le.DRAG_OVER,d=>{e({...d,payload:{type:"over",position:new fe(d.payload.position)}})}),h=await this.listen(le.DRAG_DROP,d=>{e({...d,payload:{type:"drop",paths:d.payload.paths,position:new fe(d.payload.position)}})}),f=await this.listen(le.DRAG_LEAVE,d=>{e({...d,payload:{type:"leave"}})});return()=>{i(),h(),s(),f()}}async onFocusChanged(e){const i=await this.listen(le.WINDOW_FOCUS,h=>{e({...h,payload:!0})}),s=await this.listen(le.WINDOW_BLUR,h=>{e({...h,payload:!1})});return()=>{i(),s()}}async onScaleChanged(e){return this.listen(le.WINDOW_SCALE_FACTOR_CHANGED,e)}async onThemeChanged(e){return this.listen(le.WINDOW_THEME_CHANGED,e)}}var _a;(function(t){t.Disabled="disabled",t.Throttle="throttle",t.Suspend="suspend"})(_a||(_a={}));var fa;(function(t){t.AppearanceBased="appearanceBased",t.Light="light",t.Dark="dark",t.MediumLight="mediumLight",t.UltraDark="ultraDark",t.Titlebar="titlebar",t.Selection="selection",t.Menu="menu",t.Popover="popover",t.Sidebar="sidebar",t.HeaderView="headerView",t.Sheet="sheet",t.WindowBackground="windowBackground",t.HudWindow="hudWindow",t.FullScreenUI="fullScreenUI",t.Tooltip="tooltip",t.ContentBackground="contentBackground",t.UnderWindowBackground="underWindowBackground",t.UnderPageBackground="underPageBackground",t.Mica="mica",t.Blur="blur",t.Acrylic="acrylic",t.Tabbed="tabbed",t.TabbedDark="tabbedDark",t.TabbedLight="tabbedLight"})(fa||(fa={}));var ma;(function(t){t.FollowsWindowActiveState="followsWindowActiveState",t.Active="active",t.Inactive="inactive"})(ma||(ma={}));function Ma(){return new la(Wa(),window.__TAURI_INTERNALS__.metadata.currentWebview.label,{skip:!0})}async function ya(){return n("plugin:webview|get_all_webviews").then(t=>t.map(e=>new la(new Ct(e.windowLabel,{skip:!0}),e.label,{skip:!0})))}const ta=["tauri://created","tauri://error"];class la{constructor(e,i,s){this.window=e,this.label=i,this.listeners=Object.create(null),s!=null&&s.skip||n("plugin:webview|create_webview",{windowLabel:e.label,label:i,options:s}).then(async()=>this.emit("tauri://created")).catch(async h=>this.emit("tauri://error",h))}static async getByLabel(e){var i;return(i=(await ya()).find(s=>s.label===e))!==null&&i!==void 0?i:null}static getCurrent(){return Ma()}static async getAll(){return ya()}async listen(e,i){return this._handleTauriEvent(e,i)?()=>{const s=this.listeners[e];s.splice(s.indexOf(i),1)}:pt(e,i,{target:{kind:"Webview",label:this.label}})}async once(e,i){return this._handleTauriEvent(e,i)?()=>{const s=this.listeners[e];s.splice(s.indexOf(i),1)}:na(e,i,{target:{kind:"Webview",label:this.label}})}async emit(e,i){if(ta.includes(e)){for(const s of this.listeners[e]||[])s({event:e,id:-1,payload:i});return}return Pa(e,i)}async emitTo(e,i,s){if(ta.includes(i)){for(const h of this.listeners[i]||[])h({event:i,id:-1,payload:s});return}return La(e,i,s)}_handleTauriEvent(e,i){return ta.includes(e)?(e in this.listeners?this.listeners[e].push(i):this.listeners[e]=[i],!0):!1}async position(){return n("plugin:webview|webview_position",{label:this.label}).then(e=>new fe(e))}async size(){return n("plugin:webview|webview_size",{label:this.label}).then(e=>new ht(e))}async close(){return n("plugin:webview|close",{label:this.label})}async setSize(e){return n("plugin:webview|set_webview_size",{label:this.label,value:e instanceof Ge?e:new Ge(e)})}async setPosition(e){return n("plugin:webview|set_webview_position",{label:this.label,value:e instanceof rt?e:new rt(e)})}async setFocus(){return n("plugin:webview|set_webview_focus",{label:this.label})}async hide(){return n("plugin:webview|webview_hide",{label:this.label})}async show(){return n("plugin:webview|webview_show",{label:this.label})}async setZoom(e){return n("plugin:webview|set_webview_zoom",{label:this.label,value:e})}async reparent(e){return n("plugin:webview|reparent",{label:this.label,window:typeof e=="string"?e:e.label})}async clearAllBrowsingData(){return n("plugin:webview|clear_all_browsing_data")}async setBackgroundColor(e){return n("plugin:webview|set_webview_background_color",{color:e})}async onDragDropEvent(e){const i=await this.listen(le.DRAG_ENTER,d=>{e({...d,payload:{type:"enter",paths:d.payload.paths,position:new fe(d.payload.position)}})}),s=await this.listen(le.DRAG_OVER,d=>{e({...d,payload:{type:"over",position:new fe(d.payload.position)}})}),h=await this.listen(le.DRAG_DROP,d=>{e({...d,payload:{type:"drop",paths:d.payload.paths,position:new fe(d.payload.position)}})}),f=await this.listen(le.DRAG_LEAVE,d=>{e({...d,payload:{type:"leave"}})});return()=>{i(),h(),s(),f()}}}function mi(){const t=Ma();return new bt(t.label,{skip:!0})}async function xa(){return n("plugin:window|get_all_windows").then(t=>t.map(e=>new bt(e,{skip:!0})))}class bt{constructor(e,i={}){var s;this.label=e,this.listeners=Object.create(null),i!=null&&i.skip||n("plugin:webview|create_webview_window",{options:{...i,parent:typeof i.parent=="string"?i.parent:(s=i.parent)===null||s===void 0?void 0:s.label,label:e}}).then(async()=>this.emit("tauri://created")).catch(async h=>this.emit("tauri://error",h))}static async getByLabel(e){var i;const s=(i=(await xa()).find(h=>h.label===e))!==null&&i!==void 0?i:null;return s?new bt(s.label,{skip:!0}):null}static getCurrent(){return mi()}static async getAll(){return xa()}async listen(e,i){return this._handleTauriEvent(e,i)?()=>{const s=this.listeners[e];s.splice(s.indexOf(i),1)}:pt(e,i,{target:{kind:"WebviewWindow",label:this.label}})}async once(e,i){return this._handleTauriEvent(e,i)?()=>{const s=this.listeners[e];s.splice(s.indexOf(i),1)}:na(e,i,{target:{kind:"WebviewWindow",label:this.label}})}async setBackgroundColor(e){return n("plugin:window|set_background_color",{color:e}).then(()=>n("plugin:webview|set_webview_background_color",{color:e}))}}yi(bt,[Ct,la]);function yi(t,e){(Array.isArray(e)?e:[e]).forEach(i=>{Object.getOwnPropertyNames(i.prototype).forEach(s=>{var h;typeof t.prototype=="object"&&t.prototype&&s in t.prototype||Object.defineProperty(t.prototype,s,(h=Object.getOwnPropertyDescriptor(i.prototype,s))!==null&&h!==void 0?h:Object.create(null))})})}var ka;(function(t){t.Add="Add",t.Advanced="Advanced",t.Bluetooth="Bluetooth",t.Bookmarks="Bookmarks",t.Caution="Caution",t.ColorPanel="ColorPanel",t.ColumnView="ColumnView",t.Computer="Computer",t.EnterFullScreen="EnterFullScreen",t.Everyone="Everyone",t.ExitFullScreen="ExitFullScreen",t.FlowView="FlowView",t.Folder="Folder",t.FolderBurnable="FolderBurnable",t.FolderSmart="FolderSmart",t.FollowLinkFreestanding="FollowLinkFreestanding",t.FontPanel="FontPanel",t.GoLeft="GoLeft",t.GoRight="GoRight",t.Home="Home",t.IChatTheater="IChatTheater",t.IconView="IconView",t.Info="Info",t.InvalidDataFreestanding="InvalidDataFreestanding",t.LeftFacingTriangle="LeftFacingTriangle",t.ListView="ListView",t.LockLocked="LockLocked",t.LockUnlocked="LockUnlocked",t.MenuMixedState="MenuMixedState",t.MenuOnState="MenuOnState",t.MobileMe="MobileMe",t.MultipleDocuments="MultipleDocuments",t.Network="Network",t.Path="Path",t.PreferencesGeneral="PreferencesGeneral",t.QuickLook="QuickLook",t.RefreshFreestanding="RefreshFreestanding",t.Refresh="Refresh",t.Remove="Remove",t.RevealFreestanding="RevealFreestanding",t.RightFacingTriangle="RightFacingTriangle",t.Share="Share",t.Slideshow="Slideshow",t.SmartBadge="SmartBadge",t.StatusAvailable="StatusAvailable",t.StatusNone="StatusNone",t.StatusPartiallyAvailable="StatusPartiallyAvailable",t.StatusUnavailable="StatusUnavailable",t.StopProgressFreestanding="StopProgressFreestanding",t.StopProgress="StopProgress",t.TrashEmpty="TrashEmpty",t.TrashFull="TrashFull",t.User="User",t.UserAccounts="UserAccounts",t.UserGroup="UserGroup",t.UserGuest="UserGuest"})(ka||(ka={}));const Sa={find:"",replace:"",column:"FilePath",case_sensitive:!1,mark_dirty:!0},ot=Aa(JSON.parse(sessionStorage.getItem("results")||"[]"));let sa;try{const t=sessionStorage.getItem("metadata");sa=t?JSON.parse(t):Sa}catch(t){console.error("Error loading metadata:",t),sa=Sa}const Be=Aa(sa);ot.subscribe(t=>{sessionStorage.setItem("results",JSON.stringify(t))});Be.subscribe(t=>{sessionStorage.setItem("metadata",JSON.stringify(t))});async function xi(t={}){return typeof t=="object"&&Object.freeze(t),await n("plugin:dialog|open",{options:t})}async function Ra(t,e){var s,h,f;const i=typeof e=="string"?{title:e}:e;return await n("plugin:dialog|ask",{message:t.toString(),title:(s=i==null?void 0:i.title)==null?void 0:s.toString(),kind:i==null?void 0:i.kind,yesButtonLabel:(h=i==null?void 0:i.okLabel)==null?void 0:h.toString(),noButtonLabel:(f=i==null?void 0:i.cancelLabel)==null?void 0:f.toString()})}var za;(function(t){t[t.Audio=1]="Audio",t[t.Cache=2]="Cache",t[t.Config=3]="Config",t[t.Data=4]="Data",t[t.LocalData=5]="LocalData",t[t.Document=6]="Document",t[t.Download=7]="Download",t[t.Picture=8]="Picture",t[t.Public=9]="Public",t[t.Video=10]="Video",t[t.Resource=11]="Resource",t[t.Temp=12]="Temp",t[t.AppConfig=13]="AppConfig",t[t.AppData=14]="AppData",t[t.AppLocalData=15]="AppLocalData",t[t.AppCache=16]="AppCache",t[t.AppLog=17]="AppLog",t[t.Desktop=18]="Desktop",t[t.Executable=19]="Executable",t[t.Font=20]="Font",t[t.Home=21]="Home",t[t.Runtime=22]="Runtime",t[t.Template=23]="Template"})(za||(za={}));async function ki(t){return n("plugin:path|extname",{path:t})}async function Si(t,e){return n("plugin:path|basename",{path:t,ext:e})}var Ri=z('<button class="cta-button inactive"><!> <span>Search</span></button>'),zi=z("<!> <span>Cancel</span>",1),$i=z("<!> <span>Search</span>",1),Ci=z('<button><div class="flex items-center gap-2"><!></div></button>'),Pi=z('<div class="block inner"><span><!> </span> <div class="progress-container svelte-1xywobe"><div class="progress-bar svelte-1xywobe"></div></div> <span> </span> <div class="progress-container svelte-1xywobe"><div class="progress-bar svelte-1xywobe"></div></div></div>'),Li=z('<span style="margin-right: 20px;"></span>'),Fi=z('<span class="clickable"> </span>'),Ai=z('<button type="button" class="small-button">Select SQLite File</button>'),Ti=z('<input type="number" min="0" step="0.1" class="duration-input" style="width: 55px"> s',1),Ei=z('<div><button type="button" class="grid item"><!> <!> <span> </span></button> <!> <!></div>'),Wi=z('<div class="grid"></div>'),Mi=z('<button class="cta-button inactive" style="width: 125px"><!> <span>Find</span></button>'),Di=z('<button class="cta-button" style="width: 125px"><!> <span>Find</span></button>'),Oi=z("<option> </option>"),Vi=z('<div class="page-columns svelte-1xywobe"><div class="block" style="height: 40vh"><div class="header"><h2>Search Algorithms</h2> <!></div> <!></div> <div class="block" style="height: 100%; margin-top: 20px"><div class="header"><h2>Metadata Replacement</h2> <!></div> <div class="input-group2"><label for="case-sensitive"><button type="button" class="grid item"><!> <span>Case Sensitive</span></button></label></div> <div class="input-group"><label for="find-text">Find:</label> <input type="text" id="find-text" placeholder="Enter text to find" class="input-field"></div> <div class="input-group"><label for="replace-text">Replace:</label> <input type="text" id="replace-text" placeholder="Enter text to replace" class="input-field"></div> <div class="input-group"><label for="column-select">in Column:</label> <select id="column-select" class="select-field"></select></div></div></div>');function Ui(t,e){zt(e,!1);const[i,s]=Ca(),h=()=>yt(lt,"$algorithmsStore",i),f=()=>yt(a(g),"$metadata",i),d=F(),g=F(),M=F();ae(e,"dbSize",8);let S=ae(e,"activeTab",12),C=ae(e,"isRemove",12),Q=ae(e,"selectedDb",8),G=F(!1);async function ie(u){const b=await Si(u),_=await ki(u);return b.replace(_,"")}async function N(){try{let u=await xi({multiple:!1,directory:!1,filters:[{name:"SQLite Database",extensions:["sqlite"]}]});if(Array.isArray(u)&&(u=u[0]),u){lt.update(_=>_.map(m=>m.id==="dbcompare"?(console.log("Updating dbcompare:",m,"New DB:",u),{...m,enabled:!0,db:u}):m));let b=_e(lt)}}catch(u){console.error("Error selecting file:",u)}}let E=_e(me);_e(lt);function X(u,b){var _;return(u.id==="audiosuite"||u.id==="filename")&&!((_=b.find(m=>m.id==="basic"))!=null&&_.enabled)?"inactive":""}async function y(){C(!1);const u=_e(Be);console.log(`Finding: ${u.find}, Replacing: ${u.replace}, Case Sensitive: ${u.case_sensitive}, Column: ${u.column}`),await n("find",{find:u.find,column:u.column,caseSensitive:u.case_sensitive,pref:_e(me)}).then(b=>{console.log(b)}).catch(b=>console.error(b)),S("results")}function D(){Be.update(u=>({...u,case_sensitive:!u.case_sensitive}))}function J(u){lt.update(b=>b.map(_=>_.id===u?{..._,enabled:!_.enabled}:_))}function Z(){console.log("Toggle Search"),k(G,!a(G)),a(G)&&de()}async function de(){_e(me);let u=_e(lt);console.log("Starting Search"),C(!0),ot.set([]);let b=u.reduce((_,m)=>(_[m.id]=m.enabled,m.id==="duration"&&(_.min_dur=m.min_dur??0),m.id==="dbcompare"&&(_.compare_db=m.db??""),_),{});b.basic||(b.audiosuite=!1),await n("search",{enabled:b,pref:_e(me)}).then(_=>{console.log("Search Results:",_),ot.set([_])}).catch(_=>console.error(_)),k(G,!1),S("results")}let O=F(0),Se=F("Initializing..."),W,se=F(0),ue=F("Requesting Records..."),re;St(async()=>{W=await pt("search-status",u=>{const b=u.payload;k(O,b.progress),k(Se,b.message),b.stage,console.log(`Search status: ${b.stage} - ${b.progress}% - ${b.message}`)}),re=await pt("search-sub-status",u=>{const b=u.payload;k(se,b.progress),k(ue,b.message),b.stage,console.log(`Search status: ${b.stage} - ${b.progress}% - ${b.message}`)})}),ci(()=>{W&&W(),re&&re()}),He(()=>ot,()=>{k(d,ot)}),He(()=>Be,()=>{si(k(g,Be),"$metadata",i)}),He(()=>h(),()=>{var u;k(M,((u=h().find(b=>b.id==="basic"))==null?void 0:u.enabled)||!1)}),$a(),Rt();var ve=Vi(),R=o(ve),H=o(R),ee=p(o(H),2);{var De=u=>{var b=Ri(),_=o(b);Ie(_,{size:18}),te(2),r(b),w(u,b)},qe=u=>{var b=Ci(),_=o(b),m=o(_);{var Le=ne=>{var oe=zi(),he=j(oe);_i(he,{size:18}),te(2),w(ne,oe)},be=ne=>{var oe=$i(),he=j(oe);Ie(he,{size:18}),te(2),w(ne,oe)};T(m,ne=>{a(G)?ne(Le):ne(be,!1)})}r(_),r(b),K(()=>et(b,1,`cta-button ${(a(G)?"cancel":"")??""}`)),P("click",b,Z),w(u,b)};T(ee,u=>{Q()==null?u(De):u(qe,!1)})}r(H);var $=p(H,2);{var x=u=>{var b=Pi(),_=o(b),m=o(_);pi(m,{size:24,class:"spinner ml-2",style:"color: var(--accent-color)"});var Le=p(m);r(_);var be=p(_,2),ne=o(be);r(be);var oe=p(be,2),he=o(oe,!0);r(oe);var Qe=p(oe,2),ft=o(Qe);r(Qe),r(b),K(()=>{B(Le,` ${a(Se)??""}`),Ye(ne,"style",`width: ${a(O)??""}%`),B(he,a(ue)),Ye(ft,"style",`width: ${a(se)??""}%`)}),w(u,b)},Oe=u=>{var b=Wi();ct(b,5,h,dt,(_,m,Le)=>{var be=Ei(),ne=o(be),oe=o(ne);{var he=V=>{var ge=Li();w(V,ge)};T(oe,V=>{(a(m).id==="audiosuite"||a(m).id==="filename")&&V(he)})}var Qe=p(oe,2);{var ft=V=>{const ge=mt(()=>(a(m).id==="audiosuite"||a(m).id==="filename")&&!a(M)?"inactive":"checked");ut(V,{size:20,get class(){return`checkbox ${a(ge)??""}`}})},Vt=V=>{vt(V,{size:20,class:"checkbox inactive"})};T(Qe,V=>{a(m).enabled?V(ft):V(Vt,!1)})}var at=p(Qe,2),it=o(at,!0);r(at),r(ne);var Ve=p(ne,2);{var Ut=V=>{var ge=ce(),st=j(ge);{var Ne=c=>{var v=ce(),A=j(v);ui(A,()=>ie(a(m).db),null,(L,q)=>{var U=Fi(),I=o(U,!0);r(U),K(()=>B(I,a(q))),P("click",U,N),w(L,U)}),w(c,v)},l=c=>{var v=Ai();P("click",v,N),w(c,v)};T(st,c=>{a(m).db!==null&&a(m).db!==void 0?c(Ne):c(l,!1)})}w(V,ge)};T(Ve,V=>{a(m).id==="dbcompare"&&V(Ut)})}var Gt=p(Ve,2);{var Ht=V=>{var ge=Ti(),st=j(ge);Fe(st),te(),Ae(st,()=>a(m).min_dur,Ne=>(a(m).min_dur=Ne,kt(()=>h()),ni(i,"$algorithmsStore"))),w(V,ge)};T(Gt,V=>{a(m).id==="duration"&&V(Ht)})}r(be),K(V=>{et(be,1,`grid item ${V??""}`,"svelte-1xywobe"),et(at,1,Fa((a(m).id==="audiosuite"||a(m).id==="filename")&&!a(M)?"inactive":"")),B(it,a(m).name)},[()=>X(a(m),h())],mt),P("click",ne,()=>J(a(m).id)),w(_,be)}),r(b),w(u,b)};T($,u=>{a(G)?u(x):u(Oe,!1)})}r(R);var Re=p(R,2),je=o(Re),ze=p(o(je),2);{var Ce=u=>{var b=Mi(),_=o(b);Ie(_,{size:18}),te(2),r(b),w(u,b)},Pe=u=>{var b=Di(),_=o(b);Ie(_,{size:18}),te(2),r(b),P("click",b,y),w(u,b)};T(ze,u=>{Q()==null?u(Ce):u(Pe,!1)})}r(je);var xe=p(je,2),pe=o(xe),Y=o(pe),ke=o(Y);{var Ot=u=>{ut(u,{size:20,class:"checkbox checked"})},Pt=u=>{vt(u,{size:20,class:"checkbox"})};T(ke,u=>{f().case_sensitive?u(Ot):u(Pt,!1)})}te(2),r(Y),r(pe),r(xe);var gt=p(xe,2),Lt=p(o(gt),2);Fe(Lt),r(gt);var wt=p(gt,2),tt=p(o(wt),2);Fe(tt),r(wt);var Je=p(wt,2),_t=p(o(Je),2);K(()=>{f(),kt(()=>{})}),ct(_t,5,()=>E.columns,dt,(u,b)=>{var _=Oi(),m={},Le=o(_,!0);r(_),K(()=>{m!==(m=a(b))&&(_.value=(_.__value=a(b))==null?"":a(b)),B(Le,a(b))}),w(u,_)}),r(_t),r(Je),r(Re),r(ve),P("click",Y,D),Ae(Lt,()=>f().find,u=>Zt(a(g),nt(f).find=u,nt(f))),Ae(tt,()=>f().replace,u=>Zt(a(g),nt(f).replace=u,nt(f))),Mt(_t,()=>f().column,u=>Zt(a(g),nt(f).column=u,nt(f))),w(t,ve),$t(),s()}var Gi=z('<button class="cta-button cancel svelte-cyleiw" style="margin-right: 8px"><!> Remove Selected</button>'),Hi=z('<!> <button class="cta-button cancel svelte-cyleiw"><!> Remove Checked</button>',1),Ki=z('<button class="cta-button cancel svelte-cyleiw"><!> <span class="svelte-cyleiw"> </span></button>'),qi=z('<button class="small-button svelte-cyleiw">Clear all Selections</button>'),ji=z('<option class="svelte-cyleiw"> </option>'),Ji=z('<span class="svelte-cyleiw">Filter by:</span> <select class="select-field svelte-cyleiw"></select>',1),Qi=z('<button type="button" class="grid item svelte-cyleiw" style="margin-left: 120px"><!> <span>Mark Records as Dirty</span></button>'),Ni=z('<p class="ellipsis svelte-cyleiw">Loading data...</p>'),Xi=z('<div><div class="grid-container svelte-cyleiw"><div class="grid-item svelte-cyleiw"><!></div> <div class="grid-item bold svelte-cyleiw"> </div> <div class="grid-item svelte-cyleiw"> </div> <div class="grid-item svelte-cyleiw"> </div></div></div>'),Zi=z('<div class="grid-header svelte-cyleiw"><div class="grid-container rheader svelte-cyleiw"><div class="grid-item header svelte-cyleiw">✔</div> <div class="grid-item header bold svelte-cyleiw">Filename</div> <div class="grid-item header svelte-cyleiw">Path</div> <div class="grid-item header svelte-cyleiw"><span class="svelte-cyleiw">Algorithm <!></span></div></div> <div class="resizer-container svelte-cyleiw"><div class="resizer-cell svelte-cyleiw"><div class="resizer svelte-cyleiw"></div></div> <div class="resizer-cell svelte-cyleiw"><div class="resizer svelte-cyleiw"></div></div> <div class="resizer-cell svelte-cyleiw"><div class="resizer svelte-cyleiw"></div></div> <div class="resizer-cell svelte-cyleiw"></div></div></div> <!>',1),Yi=z('<option class="svelte-cyleiw"> </option>'),Ii=z('<input class="input-field svelte-cyleiw" placeholder="_thinned" type="text" id="new_db_tag">'),Bi=z('<option class="svelte-cyleiw"> </option>'),es=z('<div class="block svelte-cyleiw"><div class="header svelte-cyleiw"><h2 class="svelte-cyleiw">Search Results:</h2> <span style="font-size: 18px" class="svelte-cyleiw"><!></span> <div style="margin-left: auto; display: flex; gap: 20px;" class="svelte-cyleiw"><!></div></div> <div class="bar svelte-cyleiw" style="margin-bottom: 16px; margin-top: 10px"><button type="button" class="grid item svelte-cyleiw"><!> <span class="svelte-cyleiw">Enable Selections</span></button> <!> <div class="filter-container svelte-cyleiw"><!></div></div> <div class="block inner svelte-cyleiw" style="margin-bottom: 15px"><!></div> <div class="header svelte-cyleiw" style="margin-bottom: 0px"><span class="svelte-cyleiw">Remove Records From: <select class="select-field svelte-cyleiw"></select> <!></span> <span class="svelte-cyleiw"><!> Duplicate Files On Disk: <select class="select-field svelte-cyleiw"></select></span></div></div>');function ts(t,e){zt(e,!1);const[i,s]=Ca(),h=()=>yt(me,"$preferencesStore",i),f=()=>yt(ot,"$resultsStore",i),d=()=>yt(Be,"$metadataStore",i),g=F(),M=F(),S=F(),C=F();ae(e,"removeResults",8);let Q=ae(e,"isRemove",8),G=ae(e,"activeTab",12),ie=ae(e,"selectedDb",12,null),N=F(!0),E=F([]),X=F(0),y=F(new Set),D=F("Relevant"),J=F([]),Z=F(!1);function de(){k(Z,!a(Z))}function O(l,c){switch(c){case"All":return l;case"Relevant":return l.filter(v=>!v.algorithm.includes("Keep")||v.algorithm.length>1);case"Keep":return l.filter(v=>v.algorithm.includes("Keep"));case"Remove":return l.filter(v=>!v.algorithm.includes("Keep"));default:return l.filter(v=>v.algorithm.includes(c))}}function Se(l){const c=l.target;k(D,c.value)}let W=F([{minWidth:10,width:20,percentage:2},{minWidth:100,width:200,percentage:30},{minWidth:150,width:300,percentage:53},{minWidth:50,width:50,percentage:15}]),se=F(),ue=0;function re(){if(a(se)){const l=a(se).clientWidth;l!==ue&&(ue=l,ve())}}function ve(){if(!ue)return;const l=ue-20;k(W,a(W).map(c=>{const v=Math.max(c.minWidth,Math.floor(l*(c.percentage/100)));return{...c,width:v}}))}function R(l,c){c.preventDefault();const v=c.clientX,A=a(W)[l].width;a(W).reduce((U,I)=>U+I.width,0);function L(U){const I=U.clientX-v,Xe=Math.max(a(W)[l].minWidth,A+I);Ke(W,a(W)[l].width=Xe);const Kt=a(W).reduce((Ue,qt)=>Ue+qt.width,0);k(W,a(W).map(Ue=>({...Ue,percentage:Ue.width/Kt*100})))}function q(){window.removeEventListener("mousemove",L),window.removeEventListener("mouseup",q)}window.addEventListener("mousemove",L),window.addEventListener("mouseup",q)}function H(l){a(y).has(l.id)?a(y).delete(l.id):a(y).add(l.id),k(y,new Set(a(y))),console.log("toggled: ",a(y))}function ee(l){const c=l.algorithm.includes("Keep"),v=c?l.algorithm.filter(L=>L!=="Keep"):[...l.algorithm,"Keep"],A={...l,algorithm:v};k(X,a(X)+(c?-1:1)),k(E,a(E).map(L=>L===l?A:L))}function De(){a(y).clear(),k(y,new Set(a(y)))}async function qe(){await Ra("Are you sure? This is not undoable",{title:"Confirm Replace",kind:"warning",okLabel:"Yes",cancelLabel:"Cancel"})&&a(S).find&&a(S).replace&&await n("replace_metadata",{data:a(S)}).then(()=>{console.log("Successfully replaced metadata"),Ke(S,a(S).find=""),Ke(S,a(S).replace=""),k(E,[]),G("search")}).catch(c=>{console.error("Error replacing metadata:",c)})}async function $(){try{k(N,!0),k(X,await n("get_records_size")),k(E,await n("get_results"))}catch(l){console.error("Failed to fetch data:",l)}finally{k(N,!1)}}St(()=>($(),a(se)&&(ue=a(se).clientWidth,ve()),window.addEventListener("resize",re),()=>{window.removeEventListener("resize",re)}));let x=[{id:"All",name:"All Records"},{id:"Relevant",name:"Relevant Records"},{id:"Keep",name:"Records to Keep"},{id:"Remove",name:"Records to Remove"},{id:"Basic",name:"Basic Duplicate Search"},{id:"InvalidPath",name:"Valid Filename"},{id:"SimilarFilename",name:"Similar Filename Search"},{id:"Tags",name:"Audiosuite Tags"},{id:"Waveform",name:"Waveform Comparison"},{id:"Duration",name:"Duration"},{id:"Compare",name:"Database Compare"}];async function Oe(){if((a(g).erase_files==="Delete"||!a(g).safety_db)&&!await Ra("Are you sure? This is not undoable",{title:"Confirm Remove",kind:"warning",okLabel:"Yes",cancelLabel:"Cancel"}))return;const l=a(J).filter(v=>!v.algorithm.includes("Keep")).map(v=>v.id),c=a(J).filter(v=>!v.algorithm.includes("Keep")).map(v=>v.path+"/"+v.root);l.length>0&&await n("remove_records",{records:l,clone:a(g).safety_db,cloneTag:a(g).safety_db_tag,delete:a(g).erase_files,files:c}).then(async()=>{console.log("Successfully removed records with IDs:",l),k(J,a(J).filter(v=>!l.includes(v.id))),a(J).length==0&&G("search"),ie(await n("get_db_name"))}).catch(v=>{console.error("Error removing records:",v)})}async function Re(){if(a(y).size>0){const l=[];await n("remove_records",{records:a(y),clone:a(g).safety_db,cloneTag:a(g).safety_db_tag,delete:a(g).erase_files,files:l}).then(()=>{console.log("Successfully removed records with IDs:",a(y))}).catch(c=>{console.error("Error removing records:",c)})}}async function je(l){let c=l.path+"/"+l.root;await n("open_quicklook",{filePath:c}).then(()=>{console.log("QuickLook:",c)}).catch(v=>{console.error("Error calling quicklook:",v)})}function ze(l){const c=l.target;me.update(v=>(v.erase_files=c.value,v))}function Ce(){Be.update(l=>({...l,mark_dirty:!l.mark_dirty}))}He(()=>h(),()=>{k(g,h())}),He(()=>f(),()=>{k(M,f())}),He(()=>d(),()=>{k(S,d())}),He(()=>(a(E),a(D),a(y)),()=>{let l=O(a(E),a(D));l.forEach(c=>{a(y).has(c.id)&&a(y).add(c.id)}),k(J,l)}),He(()=>a(W),()=>{k(C,a(W).map(l=>l.width))}),$a(),Rt();var Pe=es(),xe=o(Pe),pe=p(o(xe),2),Y=o(pe);{var ke=l=>{var c=oa();K(()=>B(c,`${a(X)??""} of ${a(E).length??""} Records marked for Removal`)),w(l,c)},Ot=l=>{var c=oa();K(()=>B(c,`${a(E).length??""} Records found`)),w(l,c)};T(Y,l=>{Q()?l(ke):l(Ot,!1)})}r(pe);var Pt=p(pe,2),gt=o(Pt);{var Lt=l=>{var c=Hi(),v=j(c);{var A=U=>{var I=Gi(),Xe=o(I);ba(Xe,{size:"18"}),te(),r(I),P("click",I,Re),w(U,I)};T(v,U=>{a(Z)&&U(A)})}var L=p(v,2),q=o(L);ba(q,{size:"18"}),te(),r(L),P("click",L,Oe),w(l,c)},wt=l=>{var c=Ki(),v=o(c);bi(v,{size:"18"});var A=p(v,2),L=o(A);r(A),r(c),K(()=>{var q;return B(L,`Replace '${a(S).find??""}' with '${((q=a(S))==null?void 0:q.replace)||""}'`)}),P("click",c,qe),w(l,c)};T(gt,l=>{Q()?l(Lt):l(wt,!1)})}r(Pt),r(xe);var tt=p(xe,2),Je=o(tt),_t=o(Je);{var u=l=>{ut(l,{size:20,class:"checkbox checked"})},b=l=>{vt(l,{size:20,class:"checkbox"})};T(_t,l=>{a(Z)?l(u):l(b,!1)})}te(2),r(Je);var _=p(Je,2);{var m=l=>{var c=qi();P("click",c,De),w(l,c)};T(_,l=>{a(Z)&&l(m)})}var Le=p(_,2),be=o(Le);{var ne=l=>{var c=Ji(),v=p(j(c),2);K(()=>{a(D),kt(()=>{})}),ct(v,5,()=>x,dt,(A,L)=>{var q=ji(),U={},I=o(q,!0);r(q),K(()=>{U!==(U=a(L).id)&&(q.value=(q.__value=a(L).id)==null?"":a(L).id),B(I,a(L).name)}),w(A,q)}),r(v),Mt(v,()=>a(D),A=>k(D,A)),P("change",v,Se),w(l,c)},oe=l=>{var c=Qi(),v=o(c);{var A=U=>{const I=mt(()=>a(S).column=="FilePath"||a(S).column=="Filename"||a(S).column=="Pathname"?"inactive":"");ut(U,{size:20,get class(){return`checkbox checked ${a(I)??""}`}})},L=U=>{vt(U,{size:20,class:"checkbox"})};T(v,U=>{d().mark_dirty?U(A):U(L,!1)})}var q=p(v,2);r(c),K(()=>et(q,1,Fa(a(S).column=="FilePath"||a(S).column=="Filename"||a(S).column=="Pathname"?"inactive":""),"svelte-cyleiw")),P("click",c,Ce),w(l,c)};T(be,l=>{Q()?l(ne):l(oe,!1)})}r(Le),r(tt);var he=p(tt,2),Qe=o(he);{var ft=l=>{var c=Ni();w(l,c)},Vt=l=>{var c=Zi(),v=j(c),A=o(v),L=p(o(A),6),q=o(L),U=p(o(q));wi(U,{size:20}),r(q),r(L),r(A);var I=p(A,2),Xe=o(I),Kt=o(Xe);r(Xe);var Ue=p(Xe,2),qt=o(Ue);r(Ue);var ra=p(Ue,2),Da=o(ra);r(ra),te(2),r(I),r(v);var Oa=p(v,2);oi(Oa,{get items(){return a(J)},children:di,$$slots:{default:(Ze,Va)=>{const we=mt(()=>Va.item);var Ft=Xi(),jt=o(Ft),At=o(jt),Ua=o(At);{var Ga=$e=>{ut($e,{size:14})},Ha=$e=>{vt($e,{size:14})};T(Ua,$e=>{a(we).algorithm.includes("Keep")?$e(Ha,!1):$e(Ga)})}r(At);var Tt=p(At,2),Ka=o(Tt,!0);r(Tt);var Et=p(Tt,2),qa=o(Et,!0);r(Et);var Jt=p(Et,2),ja=o(Jt,!0);r(Jt),r(jt),r(Ft),K(($e,Ja,Qa)=>{et(Ft,1,`list-item ${$e??""}`,"svelte-cyleiw"),Ye(jt,"style",`${Ja??""};    grid-template-columns: ${a(C)[0]??""}px ${a(C)[1]??""}px ${a(C)[2]??""}px ${a(C)[3]??""}px;`),B(Ka,a(we).root),B(qa,a(we).path),B(ja,Qa)},[()=>a(we).algorithm.includes("Keep")?"unselected-item":"checked-item",()=>a(y).has(a(we).id)&&a(Z)?"background-color: var(--accent-color)":"",()=>a(we).algorithm.filter($e=>$e!=="Keep").join(", ")],mt),P("click",At,()=>ee(a(we))),P("click",Tt,()=>a(Z)?H(a(we)):ee(a(we))),P("click",Et,()=>a(Z)?H(a(we)):ee(a(we))),P("click",Jt,()=>je(a(we))),w(Ze,Ft)}}}),K(()=>{Ye(A,"style",`grid-template-columns: ${a(C)[0]??""}px ${a(C)[1]??""}px ${a(C)[2]??""}px ${a(C)[3]??""}px;`),Ye(I,"style",`grid-template-columns: ${a(C)[0]??""}px ${a(C)[1]??""}px ${a(C)[2]??""}px ${a(C)[3]??""}px;`)}),P("mousedown",Kt,Ze=>R(0,Ze)),P("mousedown",qt,Ze=>R(1,Ze)),P("mousedown",Da,Ze=>R(2,Ze)),w(l,c)};T(Qe,l=>{a(N)?l(ft):l(Vt,!1)})}r(he),li(he,l=>k(se,l),()=>a(se));var at=p(he,2),it=o(at),Ve=p(o(it));K(()=>{a(g),kt(()=>{})}),ct(Ve,4,()=>[{bool:!0,text:"Database Copy with tag:"},{bool:!1,text:"Current Database"}],dt,(l,c)=>{var v=Yi(),A={},L=o(v,!0);r(v),K(()=>{A!==(A=c.bool)&&(v.value=(v.__value=c.bool)==null?"":c.bool),B(L,c.text)}),w(l,v)}),r(Ve);var Ut=p(Ve,2);{var Gt=l=>{var c=Ii();Fe(c),Ae(c,()=>a(g).safety_db_tag,v=>Ke(g,a(g).safety_db_tag=v)),P("change",c,()=>me.set(a(g))),w(l,c)},Ht=l=>{ga(l,{size:"20",class:"blinking"})};T(Ut,l=>{a(g).safety_db?l(Gt):l(Ht,!1)})}r(it);var V=p(it,2),ge=o(V);{var st=l=>{ga(l,{size:"20",class:"blinking"})};T(ge,l=>{a(g).erase_files==="Delete"&&l(st)})}var Ne=p(ge,2);ct(Ne,4,()=>[{id:"Keep",text:"Keep"},{id:"Trash",text:"Move To Trash"},{id:"Delete",text:"Permanently Delete"}],dt,(l,c)=>{var v=Bi(),A={},L=o(v,!0);r(v),K(()=>{A!==(A=c.id)&&(v.value=(v.__value=c.id)==null?"":c.id),B(L,c.text)}),w(l,v)}),r(Ne),r(V),r(at),r(Pe),K(()=>{Ye(it,"style",a(g).safety_db?"":"color: var(--warning-hover); font-style: bold;"),Ye(V,"style",a(g).erase_files!="Keep"?"color: var(--warning-hover); font-style: bold;":"")}),P("click",Je,de),P("resize",he,re),Mt(Ve,()=>a(g).safety_db,l=>Ke(g,a(g).safety_db=l)),P("change",Ve,()=>me.set(a(g))),P("change",Ne,ze),w(t,Pe),$t(),s()}var as=z('<button class="cta-button inactive"><!> <span>Find Records</span></button>'),is=z('<button class="cta-button"><!> <span>Find Records</span></button>'),ss=z("<option> </option>"),ns=z('<div class="block"><div class="header"><h2>Metadata Replacement</h2> <!></div> <div class="input-group2"><label for="case-sensitive"><button type="button" class="grid item"><!> <span>Case Sensitive</span></button></label></div> <div class="input-group"><label for="find-text">Find:</label> <input type="text" id="find-text" placeholder="Enter text to find" class="input-field"></div> <div class="input-group"><label for="replace-text">Replace:</label> <input type="text" id="replace-text" placeholder="Enter text to replace" class="input-field"></div> <div class="input-group"><label for="column-select">in Column:</label> <select id="column-select" class="select-field"></select></div></div>');function ls(t,e){zt(e,!1);let i=ae(e,"activeTab",12),s=ae(e,"isRemove",12),h=ae(e,"selectedDb",8),f=_e(me),d=F(""),g=F(""),M=F(!1),S=F("FilePath");async function C(){s(!1),console.log(`Finding: ${a(d)}, Replacing: ${a(g)}, Case Sensitive: ${a(M)}, Column: ${a(S)}`),await n("find",{find:a(d),column:a(S),caseSensitive:a(M)}).then(R=>{console.log(R)}).catch(R=>console.error(R)),i("results")}function Q(){k(M,!a(M))}Rt();var G=ns(),ie=o(G),N=p(o(ie),2);{var E=R=>{var H=as(),ee=o(H);Ie(ee,{size:18}),te(2),r(H),w(R,H)},X=R=>{var H=is(),ee=o(H);Ie(ee,{size:18}),te(2),r(H),P("click",H,C),w(R,H)};T(N,R=>{h()==null?R(E):R(X,!1)})}r(ie);var y=p(ie,2),D=o(y),J=o(D),Z=o(J);{var de=R=>{ut(R,{size:20,class:"checkbox checked"})},O=R=>{vt(R,{size:20,class:"checkbox"})};T(Z,R=>{a(M)?R(de):R(O,!1)})}te(2),r(J),r(D),r(y);var Se=p(y,2),W=p(o(Se),2);Fe(W),r(Se);var se=p(Se,2),ue=p(o(se),2);Fe(ue),r(se);var re=p(se,2),ve=p(o(re),2);K(()=>{a(S),kt(()=>{})}),ct(ve,5,()=>f.columns,dt,(R,H)=>{var ee=ss(),De={},qe=o(ee,!0);r(ee),K(()=>{De!==(De=a(H))&&(ee.value=(ee.__value=a(H))==null?"":a(H)),B(qe,a(H))}),w(R,ee)}),r(ve),r(re),r(G),P("click",J,Q),Ae(W,()=>a(d),R=>k(d,R)),Ae(ue,()=>a(g),R=>k(g,R)),Mt(ve,()=>a(S),R=>k(S,R)),w(t,G),$t()}var rs=z('<div class="block"><div class="header"><h2>Search Results: <span class="basic-text" style="display: inline-flex; margin: 0;"> </span></h2> <button class="cta-button cancel">Register</button></div> <div class="input-group2"><label for="case-sensitive">Registration Required to View Results</label></div> <div class="input-group"><label for="name">Name:</label> <input type="text" id="find-text" placeholder="Enter Registration Name" class="input-field"></div> <div class="input-group"><label for="email">Email:</label> <input type="text" id="find-text" placeholder="Enter Registration Email" class="input-field"></div> <div class="input-group"><label for="Reg">License:</label> <input type="text" id="replace-text" placeholder="Enter License number" class="input-field"></div> </div>');function os(t,e){zt(e,!1);let i=ae(e,"isRegistered",12),s=F(_e(aa)),h=F(0),f=F("temp");async function d(){try{k(f,await n("get_reg",{data:a(s)}))}catch(O){console.error("Failed to fetch data:",O)}}async function g(){aa.set(a(s)),n("check_reg",{data:a(s)}).then(O=>{i(O),console.log("Registration:",O)}).catch(O=>console.error(O))}async function M(){try{k(h,await n("get_records_size"))}catch(O){console.error("Failed to fetch data:",O)}}St(M),St(d),Rt();var S=rs(),C=o(S),Q=o(C),G=p(o(Q)),ie=o(G);r(G),r(Q);var N=p(Q,2);r(C);var E=p(C,4),X=p(o(E),2);Fe(X),r(E);var y=p(E,2),D=p(o(y),2);Fe(D),r(y);var J=p(y,2),Z=p(o(J),2);Fe(Z),r(J);var de=p(J);r(S),K(()=>{B(ie,`${a(h)??""} duplicates found`),B(de,` ${a(f)??""}`)}),P("click",N,g),Ae(X,()=>a(s).name,O=>Ke(s,a(s).name=O)),Ae(D,()=>a(s).email,O=>Ke(s,a(s).email=O)),Ae(Z,()=>a(s).license,O=>Ke(s,a(s).license=O)),w(t,S),$t()}var cs=z('<div class="app-container"><div class="top-bar"><div class="top-bar-left"><button class="nav-link"><!> <span style="font-size: 24px;"> </span></button></div> <div class="top-bar-right"><button><div class="flex items-center gap-2"><!> <span>Search</span></div></button> <button><div class="flex items-center gap-2"><!> <span>Results</span></div></button> <button class="nav-link"><div class="flex items-center gap-2"><!> Options</div></button></div></div> <main class="content"><!></main></div>');function ws(t,e){zt(e,!1);let i=ae(e,"dbSize",12,0),s=ae(e,"activeTab",12,"search"),h=ae(e,"isRemove",12,!0),f=ae(e,"isRegistered",12,!1),d=ae(e,"selectedDb",12,null);_e(me),me.subscribe($=>{if($!=null&&$.colors){const{colors:x}=$;document.documentElement.style.setProperty("--primary-bg",x.primaryBg??"#1a1a1a"),document.documentElement.style.setProperty("--secondary-bg",x.secondaryBg??"#2a2a2a"),document.documentElement.style.setProperty("--text-color",x.textColor??"#ffffff"),document.documentElement.style.setProperty("--topbar-color",x.topbarColor??"#333333"),document.documentElement.style.setProperty("--accent-color",x.accentColor??"#007acc"),document.documentElement.style.setProperty("--hover-color",x.hoverColor??"#2b2b2b"),document.documentElement.style.setProperty("--warning-color",x.warningColor??"#ff4444"),document.documentElement.style.setProperty("--warning-hover",x.warningHover??"#cc0000"),document.documentElement.style.setProperty("--inactive-color",x.inactiveColor??"#666666")}});async function g(){try{const $=await n("get_columns");me.update(x=>({...x,columns:$}))}catch($){console.error("Failed to fetch columns:",$)}}async function M(){const $=await Ct.getByLabel("preferences");if($)await $.isVisible()?await $.hide():await $.show();else{const x=`${window.location.origin}/preferences`;console.log("Creating Pref Window!");const Oe=new bt("preferences",{title:"Preferences",width:1050,height:800,visible:!0,url:x,dragDropEnabled:!1,devtools:!0});await pt("preferences-log",Re=>{console.log("Preferences Window:",Re.payload)}),Oe.once("tauri://created",function(){console.log("Preferences window created!")}),Oe.once("tauri://error",function(Re){console.error("Error creating preferences window:",Re)})}}async function S(){console.log("Checking Registration");let $=_e(aa);return n("check_reg",{data:$}).then(x=>{f(x),console.log("Registration:",x)}).catch(x=>console.error(x)),f()}async function C(){console.log("getting size"),n("get_db_size").then($=>{i($),console.log("get size:",$)}).catch($=>console.error($))}async function Q($=!1){await n("open_db",{isCompare:$}).then(x=>{d(x),console.log("db path: ",x),s()=="search"||s()=="metadata"||s("search")}).catch(x=>console.error(x)),await C(),await g()}function G(){console.log("Remove selected results")}St(S),Rt();var ie=cs(),N=o(ie),E=o(N),X=o(E),y=o(X);vi(y,{size:18});var D=p(y,2),J=o(D,!0);r(D),r(X),r(E);var Z=p(E,2),de=o(Z),O=o(de),Se=o(O);Ie(Se,{size:18}),te(2),r(O),r(de);var W=p(de,2),se=o(W),ue=o(se);hi(ue,{size:18}),te(2),r(se),r(W);var re=p(W,2),ve=o(re),R=o(ve);gi(R,{size:18}),te(),r(ve),r(re),r(Z),r(N);var H=p(N,2),ee=o(H);{var De=$=>{Ui($,{get dbSize(){return i()},get selectedDb(){return d()},set selectedDb(x){d(x)},get activeTab(){return s()},set activeTab(x){s(x)},get isRemove(){return h()},set isRemove(x){h(x)},$$legacy:!0})},qe=$=>{var x=ce(),Oe=j(x);{var Re=ze=>{var Ce=ce(),Pe=j(Ce);{var xe=Y=>{ts(Y,{removeResults:G,get isRemove(){return h()},set isRemove(ke){h(ke)},get activeTab(){return s()},set activeTab(ke){s(ke)},get selectedDb(){return d()},set selectedDb(ke){d(ke)},$$legacy:!0})},pe=Y=>{os(Y,{get isRegistered(){return f()},set isRegistered(ke){f(ke)},$$legacy:!0})};T(Pe,Y=>{f()?Y(xe):Y(pe,!1)})}w(ze,Ce)},je=ze=>{var Ce=ce(),Pe=j(Ce);{var xe=pe=>{ls(pe,{get activeTab(){return s()},set activeTab(Y){s(Y)},get isRemove(){return h()},set isRemove(Y){h(Y)},get selectedDb(){return d()},set selectedDb(Y){d(Y)},$$legacy:!0})};T(Pe,pe=>{s()==="metadata"&&pe(xe)},!0)}w(ze,Ce)};T(Oe,ze=>{s()==="results"?ze(Re):ze(je,!1)},!0)}w($,x)};T(ee,$=>{s()==="search"?$(De):$(qe,!1)})}r(H),r(ie),K(()=>{B(J,d()?d():"Select Database"),et(de,1,`nav-link ${(s()==="search"?"active":"")??""}`),et(W,1,`nav-link ${(s()==="results"?"active":"")??""}`)}),P("click",X,()=>Q(!1)),P("click",de,()=>s("search")),P("click",W,()=>s("results")),P("click",re,M),w(t,ie),$t()}export{ws as component};
